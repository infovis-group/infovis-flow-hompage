(()=>{"use strict";var __webpack_modules__={1002:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1002);!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}({0:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(Symbol.iterator)?function(e){return(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(e)})(e)}function s(e){if(!e)return"";var t=e;return String(t).match(/^url\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*\)/i)&&(t='<div style="background:'+t+' no-repeat;height:100%;width:100%;border-radius:inherit;background-size:contain;"></div>'),t}function o(e,t){t.split(" ").forEach((function(t){t&&e.classList.add(t)}))}function _(e,t){return e.classList.contains(t)}function i(e,t){return e.classList.remove(t)}function a(e){return e&&"function"==typeof e}function u(e){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("cut")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{t.remove()}}function c(e,t,n,s){if(n=!0===n,s=!0===s,null==e||null==e)return $.extend(n,{},t);var o=$.extend(n,{},e);if(null==t||null==t)return o;var _=function(e,t,o){"__delete__"===o?s?e[t]=o:delete e[t]:"object"!==r(o)||o instanceof Array?e[t]=o:e[t]=$.extend(n,{},o)};for(var i in t){var a=t[i];if(!i.startsWith("@opt:")||(i=i.substr(5),o.hasOwnProperty(i))){var u=o[i];!o.hasOwnProperty(i)||null===u||"object"!==r(u)||u instanceof Array||!(Object.keys(u).length>0)||u instanceof Array||"object"!==r(a)||a instanceof Array?_(o,i,a):o[i]=c(u,a,n)}}return o}function l(e){return JSON.parse(JSON.stringify(e))}function f(e){return e?" "+e:""}function d(e,t){return e.concat(t&&0!==t.length?t.filter((function(t){return!e.includes(t)})):[])}function p(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}n.r(t),n.d(t,"parseIcon",(function(){return s})),n.d(t,"addClass",(function(){return o})),n.d(t,"hasClass",(function(){return _})),n.d(t,"removeClass",(function(){return i})),n.d(t,"isFunc",(function(){return a})),n.d(t,"copyToClipboard",(function(){return u})),n.d(t,"merge",(function(){return c})),n.d(t,"copyObject",(function(){return l})),n.d(t,"addClassName",(function(){return f})),n.d(t,"arrMerge",(function(){return d})),n.d(t,"arrRemove",(function(){return p}))},15:function _(module,__nested_webpack_exports__,__nested_webpack_require_4645__){__nested_webpack_require_4645__.r(__nested_webpack_exports__),__nested_webpack_require_4645__.d(__nested_webpack_exports__,"MangoMessanger",(function(){return MangoMessanger}));var _utils_common__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_4645__(0);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(Symbol.iterator)?function(e){return(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var MangoMessanger=function(){function MangoMessanger(e){_classCallCheck(this,MangoMessanger),e=e||{},this.__prefix__=e.prefix||"mAnGoJaM",this.__encryptFlag__=!1!==e.encrypt,this.__data__={},this.__listeners__={},this.__origin__,this.__init(),this.sseUrl=e.sseUrl,this.sseKeyUrl=e.sseKeyUrl,this.__sseMsg={},this.source=null,this.__sseKeys=[],this.__sleepTime=e.sleepTime||60,this.__sleepTimeout=-1}return _createClass(MangoMessanger,[{key:"__init",value:function(){var e=this;e.__origin__=window.location.origin,window&&(window.addEventListener("message",(function(t){e.__messageHandler(t)})),window.addEventListener("visibilitychange",(function(){if(clearTimeout(e.__sleepTimeout),document.hidden){var t=!0;Object(_utils_common__WEBPACK_IMPORTED_MODULE_0__.isFunc)(e.sseclossAsInvisible)&&(t=e.sseclossAsInvisible.call(e,document.hidden)),t&&(e.__sleepTimeout=setTimeout((function(){e.closeSSE()}),100*e.__sleepTime))}else e.openSSE()})),window.addEventListener("beforeunload",(function(){e.closeSSE()})))}},{key:"setPrefix",value:function(e){for(var t=e.split(""),n=[],r=0;r<t.length;r++)n.push(r%2==0?t[r].toLowerCase():t[r].toUpperCase());this.__prefix__=n.join("")}},{key:"push",value:function(){for(var e,t,n,r=this,s=!1,o=0;o<arguments.length;o++){var _=arguments[o];null!=_&&("boolean"==typeof _?s=_:"object"===_typeof(_)&&"origin"in _?t=_:_ instanceof Array&&(n=_))}e={},n=n&&n.length>0?n:Object.keys(r.__data__);for(var i=0;i<n.length;i++){var a=n[i];if(a in r.__data__){var u=r.__data__[a];(s||u.state!==MangoMessanger.const.pushed)&&(e[a]=u.value,u.state===MangoMessanger.const.toDelete?delete r.__data__[a]:s||(u.state=MangoMessanger.const.pushed))}}return Object.keys(e).length>0&&r.__send(e,t),r}},{key:"fetchAll",value:function(){return this.fetch(),this}},{key:"fetch",value:function(e){var t=this;if(window.parent===window)return t;var n=t.__parseVararg(arguments);return new Promise((function(e){return e()})).then((function(){window.parent.postMessage(t.__buildCallbackRequest("push",[n,!0],!0),"*")})),t}},{key:"setExpired",value:function(e){var t=this;e=0===(e=t.__parseVararg(arguments)).length?Object.keys(t.__data__):e;for(var n=0;n<e.length;n++){var r=e[n];r in t.__data__&&(t.__data__[r].state=MangoMessanger.const.expired)}return t}},{key:"setExpiredAndFetch",value:function(e){var t=this;return e=t.__parseVararg(arguments),t.setExpired(e),t.fetch(e),t}},{key:"has",value:function(e){return e in this.__data__}},{key:"get",value:function(e,t){return e in this.__data__?this.__data__[e].value:t}},{key:"commit",value:function(e,t){var n=this;"object"!==_typeof(n.__data__)&&(n.__data__={});var r=JSON.stringify(new Date);return e in n.__data__&&n.__isSame(n.__data__[e].value,t)||(n.__exeListeners(e,t),n.__data__[e]={value:t,source:n.__origin__,updateTime:r,state:t===MangoMessanger.const.toDelete?t:MangoMessanger.const.toUpdate}),n}},{key:"update",value:function(e,t){return this.commit(e,t).push(e),this}},{key:"sync",value:function(e,t){var n=this;return n.commit(e,t).push(e),new Promise((function(e){return e()})).then((function(){window.parent!==window&&window.parent.postMessage(n.__buildCallbackRequest("push",[[e]],!1),"*")})),n}},{key:"delete",value:function(e){return this.update(e,MangoMessanger.const.toDelete),this}},{key:"addVariableListener",value:function(e,t,n){var r=this;if("function"==typeof n){try{r.__getListeners(t)[e].push(n)}catch(n){console.error("Failed to add <"+e+"> listener for <"+t+">, supported events: "+Object.keys(r.__getListeners(t)))}return r}console.error("Third argument not a function.")}},{key:"removeVariableListener",value:function(e,t,n){if("function"==typeof n)return this.__removeListener(e,t,n);console.error("Third argument not a function.")}},{key:"removeVariableListeners",value:function(e,t){return this.__removeListener(e,t)}},{key:"__removeListener",value:function(e,t,n){var r=this,s=r.__getListeners(t)[e];if(void 0===s)return console.error("No <"+e+"> listener for <"+t+"> is found."),r;try{if(s.includes(n)){var o=s.indexOf(n);s.splice(o,1)}else s.length=1}catch(n){console.error("Failed to remove <"+e+"> listener for <"+t+">",n)}return r}},{key:"__getListeners",value:function(e){var t=this;return e in t.__listeners__||(t.__listeners__[e]=t.__buildDefaultListeners(e)),t.__listeners__[e]}},{key:"__buildDefaultListeners",value:function(e){return{update:[function(t){globalThis.jarLidOpen&&'"'.concat(e,'" has been updated to ').concat(JSON.stringify(t))}],delete:[function(t){globalThis.jarLidOpen&&'"'.concat(e,'" has been removed.')}]}}},{key:"clearAllVariableListeners",value:function(){return this.__listeners__={},this}},{key:"setEncrypt",value:function(e){return this.__encryptFlag__=!!e,this}},{key:"__parseVararg",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r instanceof Array?t=t.concat(r):t.push(r)}return t}},{key:"__messageHandler",value:function(e){var t=this;if("string"==typeof e.data&&e.data.startsWith(t.__prefix__)){var n=t.__decode(e.data);if(""!==n){var r=n;try{r=JSON.parse(n,(function(e,t){return"string"==typeof t&&t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/)?new Date(t):t}))}catch(e){return void console.error("Failed to parse <"+n+"> to object.")}if(MangoMessanger.const.callback in r)t.__processCallback(r[MangoMessanger.const.callback],e);else for(var s=Object.keys(r),o=0;o<s.length;o++){var _=s[o],i=r[_];t.__exeListeners(_,i,e.origin)}}}}},{key:"__exeListeners",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"me",s=this,o=t===MangoMessanger.const.toDelete?void 0:t,_=JSON.stringify(o);if(e in s.__data__&&(n=s.__data__[e].state===MangoMessanger.const.expired?MangoMessanger.const.expired:JSON.stringify(s.__data__[e].value)),n!==_){var i="update";t===MangoMessanger.const.toDelete?(i="delete",delete s.__data__[e]):s.__data__[e]={value:o,updateTime:JSON.stringify(new Date),source:r,state:MangoMessanger.const.updated},s.__getListeners(e)[i].forEach((function(e){new Promise((function(e){return e()})).then((function(){e.call(null,o)}))}))}}},{key:"__buildCallbackRequest",value:function(e,t,n){var r={};return r[MangoMessanger.const.callback]={method:e,args:[].slice.call(t),needEvent:n},this.__encode(JSON.stringify(r))}},{key:"__processCallback",value:function __processCallback(request,event){var me=this;if("method"in request&&"args"in request)try{var _func;if(eval("_func = me."+request.method),"function"!=typeof _func)return void console.error("No such method <"+request.method+">.");var _args=request.args;request.needEvent&&(_args=[event].concat(_args)),_func.apply(me,_args)}catch(e){console.error("Failed to call function<"+request.method+"> args<"+request.args+">",e)}}},{key:"__isSame",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"__send",value:function(e,t){var n;if("object"===_typeof(e)&&0!==Object.keys(e).length){n=JSON.stringify(e),n=this.__encode(n);var r=[];t?t.source&&"null"!==t.origin&&r.push({dom:t.source,src:t.origin}):(window.parent!==window&&r.push({dom:window.parent,src:"*"}),Array.prototype.forEach.call(document.getElementsByTagName("iframe"),(function(e){var t=e.src;(t=t.trim())&&""!==t&&"about:blank"!==t&&r.push({dom:e.contentWindow,src:t})}))),r.forEach((function(e){new Promise((function(e){return e()})).then((function(){e.dom.postMessage(n,e.src)}))}))}}},{key:"__encode",value:function(e){var t=this;if(e&&t.__encryptFlag__)try{for(var n=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))),r=t.__randomValue(3,10),s=t.__randomValue(1,r),o=[65+s],_=0;_<r;_++)_+1===s&&o.push(65+r),o.push(t.__randomValue(0,10)>=5?t.__randomValue(97,122):t.__randomValue(65,90));return(t.__prefix__||"")+String.fromCharCode.apply(null,o)+n}catch(e){}return(t.__prefix__||"")+e}},{key:"__decode",value:function(e){var t=this;if(e&&t.__encryptFlag__)try{var n=t.__prefix__?t.__prefix__.length:0,r=e.substr(n+e.charCodeAt(n+e.charCodeAt(n)-65)-63);return decodeURIComponent(atob(r).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(e){}return e.substr(t.__prefix__?t.__prefix__.length:0)}},{key:"__randomValue",value:function(e,t){return e+Math.round(Math.random()*(t-e))}},{key:"setSSOpt",value:function(e){return this.sseUrl=e.sseUrl,this.sseKeyUrl=e.sseKeyUrl,this.__sseKeys=e.listeners||[],this.__sleepTime=e.sleepTime||60,this.sseclossAsInvisible=e.invisibleFunc,this.seeCloseFunc=e.close,this}},{key:"openSSE",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{url:null,openFunc:null,key:null,msg:{}};if(!this.source&&(e.url&&(this.sseUrl=e.url),e.key&&(this.__sseKeys=e.key),0!==this.__sseKeys.length)){this.source=new EventSource("".concat(this.sseUrl,"?key=").concat(this.__sseKeys.join(","))),this.__sseMsg=e.msg,this.source.onopen=function(t){Object(_utils_common__WEBPACK_IMPORTED_MODULE_0__.isFunc)(e.openFunc)&&e.openFunc(t)};var t=this;return this.source.onmessage=function(e){var n;try{n=JSON.parse(e.data)}catch(t){console.error("$csse analysis error:"+e.data,"color:  #c5711a;")}t.__sseEventId=e.lastEventId,n&&"object"===_typeof(n)&&Object.keys(n).forEach((function(e){t.update(e+"-sse",n[e]),Object(_utils_common__WEBPACK_IMPORTED_MODULE_0__.isFunc)(t.__sseMsg[e])&&t.__sseMsg[e].call(t,n[e])}))},this.source.onerror=function(e){console.error("%csse link fail","color:  #c5711a;")},this.source}}},{key:"getSource",value:function(){return this.source}},{key:"setSSEMsg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.__sseMsg,e)}},{key:"delSSEMsg",value:function(e){e&&this.__sseMsg&&delete this.__sseMsg[e]}},{key:"closeSSE",value:function(){this.source&&(Object(_utils_common__WEBPACK_IMPORTED_MODULE_0__.isFunc)(this.seeCloseFunc)&&this.seeCloseFunc.call(this),this.source.close(),this.source=null)}},{key:"addSSEListeners",value:function(e){var t=this;if(e){var n=this.__sseKeys,r=!1;"string"!=typeof e||n.includes(e)?e instanceof Array?e.forEach((function(s){n.includes(e)||(r=!0,t.__sseKeys.push(s))})):Object.keys(e).forEach((function(s){!n.includes(e)&&Object(_utils_common__WEBPACK_IMPORTED_MODULE_0__.isFunc)(e[s])&&(n.includes(e)||(r=!0,t.__sseKeys.push(s)),t.__sseMsg[s]=e[s])})):(r=!0,this.__sseKeys.push(e)),r&&this.setSSEListeners()}}},{key:"delSSEListeners",value:function(e){var t=this;"string"==typeof e?this.__sseKeys.remove(e):e instanceof Array&&e.forEach((function(e){t.__sseKeys.remove(e)})),this.setSSEListeners()}},{key:"setSSEListeners",value:function(){var e=this;clearTimeout(this.__sseUrlTime__),this.__sseUrlTime__=setTimeout((function(){e.__setSSEListeners()}),500)}},{key:"__setSSEListeners",value:function(){if(this.source)if(0===this.__sseKeys.length)this.closeSSE();else{var e=new XMLHttpRequest;e.open("GET",this.sseKeyUrl,!1),e.send("key=".concat(this.__sseKeys.join(","),"&eventId=").concat(this.__sseEventId))}else this.openSSE()}}]),MangoMessanger}();_defineProperty(MangoMessanger,"const",{toDelete:"=@tOdElEtE@=",toUpdate:"=@tOuPdAtE@=",pushed:"=@pUsHeD@=",updated:"=@uPdAtEd@=",expired:"=@eXpIrEd@=",callback:"=@cAlLbAcK@="}),String.prototype.addVariableListener=function(e,t){window.mangoJam.addVariableListener(e,this.toString(),t)},String.prototype.removeVariableListener=function(e,t){window.mangoJam.removeVariableListener(e,this.toString(),t)}},32:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(15);globalThis.mangoJam||(globalThis.JamMessenger=r.MangoMessanger,globalThis.jamMessenger=globalThis.jammsgr=globalThis.mangoJam=new r.MangoMessanger)}})})()})();