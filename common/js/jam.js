!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=72)}([function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){if(!e)return"";var t=e;return String(t).match(/^url\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*\)/i)&&(t='<div style="background:'+t+' no-repeat;height:100%;width:100%;border-radius:inherit;background-size:contain;"></div>'),t}function a(e,t){t.split(" ").forEach((function(t){t&&e.classList.add(t)}))}function o(e,t){return e.classList.contains(t)}function s(e,t){return e.classList.remove(t)}function c(e){return e&&"function"==typeof e}function l(e){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("cut")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{t.remove()}}function u(e,t,n,i){if(n=!0===n,i=!0===i,null==e||null==e)return $.extend(n,{},t);var a=$.extend(n,{},e);if(null==t||null==t)return a;var o=function(e,t,a){"__delete__"===a?i?e[t]=a:delete e[t]:"object"!==r(a)||a instanceof Array?e[t]=a:e[t]=$.extend(n,{},a)};for(var s in t){var c=t[s];if(!s.startsWith("@opt:")||(s=s.substr(5),a.hasOwnProperty(s))){var l=a[s];!a.hasOwnProperty(s)||null===l||"object"!==r(l)||l instanceof Array||!(Object.keys(l).length>0)||l instanceof Array||"object"!==r(c)||c instanceof Array?o(a,s,c):a[s]=u(l,c,n)}}return a}function d(e){return JSON.parse(JSON.stringify(e))}function f(e){return e?" "+e:""}function h(e,t){return e.concat(t&&0!==t.length?t.filter((function(t){return!e.includes(t)})):[])}function _(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}n.r(t),n.d(t,"parseIcon",(function(){return i})),n.d(t,"addClass",(function(){return a})),n.d(t,"hasClass",(function(){return o})),n.d(t,"removeClass",(function(){return s})),n.d(t,"isFunc",(function(){return c})),n.d(t,"copyToClipboard",(function(){return l})),n.d(t,"merge",(function(){return u})),n.d(t,"copyObject",(function(){return d})),n.d(t,"addClassName",(function(){return f})),n.d(t,"arrMerge",(function(){return h})),n.d(t,"arrRemove",(function(){return _}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,i=n(0),a={},o={};function s(e,t,n,i){if(null!=e){var o,s=$("body");null==t&&(t=s),o="string"==typeof e?$("#"+e):e instanceof $?e:$(e),a.hasOwnProperty(e)||(a[e]=-1),o.addClass("movable"),o.on({mouseenter:function(c){o.draggable({enable:!0,containment:t,scroll:!1,delay:50,start:function(t,n){clearTimeout(a[e]),r=!0,s.css({"pointer-events":"none"}),o.css({transition:"none"}),i&&i()},drag:function(e,t){},stop:function(t,i){clearTimeout(a[e]),r=!1,s.css({"pointer-events":""}),o.css({transition:""}),null!=n&&(a[e]=setTimeout((function(){n()}),200))}})},mouseleave:function(e){!r&&o.hasClass(".ui-draggable")&&o.draggable("destroy")}})}}function c(e,t,n){if(null!=e){var r;(r="string"==typeof e?$("#"+e):e instanceof $?e:$(e)).addClass("closable");var i=$("<span>",{class:"close-butt",html:'<i class="iconfont icon-close"></i>'});l(r).append(i),e in o||(o[e]=-1);i.on({mousedown:function(e){e.stopPropagation()},click:function(i){i.stopPropagation(),n&&n(),r.trigger("mouseleave"),clearTimeout(o[e]),r.addClass("on-closing"),o[e]=setTimeout((function(){null!=t&&t()}),150)}})}}function l(e){var t=e.children(".butt-container");return 0===t.length&&e.append('<div class="butt-container"></div>'),t}function u(e,t,n){var r;null!=e&&(null==n&&(n={}),(r="string"==typeof e?$("#"+e):e instanceof $?e:$(e)).addClass("resizable"),r.resizable(Object(i.merge)({handles:"n, e, s, w, ne, se, sw, nw",start:function(){$("body").css({"pointer-events":"none"}),r.css({transition:"none"})},stop:function(){$("body").css({"pointer-events":""}),r.css({transition:""}),t&&t()}},n)))}n(27);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t)if(t.id)if(t.id in e.cards)console.error("duplicate ID");else{e.cards[t.id]=this,this.$min=null,this.$max=null,this.id=t.id,this.config=e._defaultCard(t),this.max=this.config.max,this.min=this.config.min,this.getDataFun=t.getData,this.interval=-1,this.intervalTime=t.interval,this.sseKey=t.sseKey,this.tag=t.tag||"anywhere";var n=t.listeners;n&&Object.keys(n).forEach((function(n){e.__listener__.hasOwnProperty(n)?e.__listener__[n].push(t.id):e.__listener__[n]=[t.id]}))}else console.error("cardId is null");else console.error("cardconfig is null")}var t,n,r;return t=e,n=[{key:"closeCard",value:function(){"function"==typeof e.beforeClose&&e.beforeClose.apply(this,Array.prototype.map.apply(arguments,[function(e){return e}])),this.removeCard()}},{key:"removeCard",value:function(){if(this.max.destroy&&this.max.destroy.apply(this,[this.config]),e.remove&&e.remove.apply(this,[this]),this.$max&&this.$max.remove(),this.$max=null,!this.$min){if(this.sseKey&&window.mangoJam){var t=this.sseKey;window.mangoJam.delSSEListeners(t),window.mangoJam.removeVariableListeners("update",t+"-sse")}clearInterval(this.interval),this.interval=-1}}},{key:"destroy",value:function(){this.min.destroy&&this.min.destroy(this.config),this.$min&&this.$min.remove(),this.$min=null,this.removeCard()}},{key:"buildCard",value:function(t,n,r){if(this.$max)return e.cardOpened&&e.cardOpened.apply(this),void(null!=r&&r.getData&&this._getData(null==r?void 0:r.getData));e.berforeBuild&&e.berforeBuild.apply(this),this._getData(null==r?void 0:r.getData),t=t&&""!==t?t instanceof $?t:$(t):$(document.getElementsByTagName("body")[0]);var a=$("<div>",{class:"jamui-card max"+Object(i.addClassName)(this.config.class)+Object(i.addClassName)(this.max.class),id:this.id+"-card","data-id":this.id,height:"0",width:"0"});!0===this.config.frameless&&a.addClass("no-frame"),!this.config.name&&a.addClass("no-title"),this.config.echarts&&a.addClass("echarts-card");var o=$("<div>",{class:"card-title"}),l=$("<div>",{class:"card-body"}),d=$("<span>",{class:"text",text:this.config.name||""});o.append('<span class="icon">'+(Object(i.isFunc)(this.config.icon)?this.config.icon():Object(i.parseIcon)(this.config.icon))+"</span>").append(d),a.append(o).append(l).append('<div class="butt-container"></div>').appendTo(t),this.$max=a;var f=this;c(a,(function(){f.closeCard(!1)})),t.jamLayout&&t.jamLayout()?e.layoutCard(this,t.jamLayout()):("drag"in this.config.max?s(a,t,this.config.max.drag.start,this.config.max.drag.stop):s(a,t),"resize"in this.config.max?u(this.id+"-card",this.config.max.resize.stop):u(this.id+"-card")),!1!==(null==r?void 0:r.unset)?this.unsetCard():this.setCard(),!0===(null==r?void 0:r.noTitle)?a.addClass("no-title"):!1===(null==r?void 0:r.noTitle)&&a.removeClass("no-title"),this.setPos(n),this.redrawCard(),$.data(a[0],"jamCard",this),e.afterBuild&&e.afterBuild.apply(this)}},{key:"redrawCard",value:function(){this.$max&&(e.beforeDraw&&e.beforeDraw.apply(this),this.max.title&&this.max.title.apply(this,[this.$max.children(".card-title").children(".text"),this.config]),this.max.draw&&this.max.draw.apply(this,[this.$max.children(".card-body"),this.$max.children(".card-title").children(".text"),this.config]),e.openCard&&e.openCard(this),e.afterDraw&&e.afterDraw.apply(this))}},{key:"reTitle",value:function(e){this.$max&&this.$max.children(".card-title").html(e),this.$min&&this.$min.children(".card-title").html(e)}},{key:"drawMini",value:function(){this.$min||(this._getData(),this.buildMini()),this.min.title&&this.min.title.apply(this,[this.$min.children(".card-title").children(".text"),this.config]),this.min.draw&&this.min.draw.apply(this,[this.$min.children(".card-body"),this.$min.children(".card-title"),this.config])}},{key:"redrawMini",value:function(){this.$min&&(this.min.title&&this.min.title.apply(this,[this.$min.children(".card-title").children(".text"),this.config]),this.min.draw&&this.min.draw.apply(this,[this.$min.children(".card-body"),this.$min.children(".card-title"),this.config]))}},{key:"_getData",value:function(e){var t=this,n=this.getDataFun;if(Object(i.isFunc)(n))if(n.apply(this,[e]),this.sseKey&&window.mangoJam){var r=this.sseKey,a=this;window.mangoJam.addSSEListeners(r),window.mangoJam.removeVariableListeners("update",r+"-sse"),window.mangoJam.addVariableListener("update",r+"-sse",(function(t){n.apply(a,[e])}))}else this.intervalTime&&(clearInterval(this.interval),this.interval=setInterval((function(){n.apply(t,[e])}),1e3*this.intervalTime))}},{key:"setCard",value:function(){var t=this.$max;t.removeClass("movable resizable").addClass("jamCard-set"),t.draggable({disabled:!0}),t.resizable({disabled:!0}),t.css("z-index",""),t.off("mousedown",e._refreshIndex)}},{key:"unsetCard",value:function(){var t=this.$max;t.addClass("movable resizable").removeClass("jamCard-set"),t.draggable({disabled:!1}),t.resizable({disabled:!1}),t.css("z-index",++e.index),t.on("mousedown",e._refreshIndex)}},{key:"setPos",value:function(t){var n=t||this.config.pos;if(n)if(n instanceof Array)this.$max.css({top:"",left:"",height:"",width:"",right:"",bottom:"","grid-row-start":n[0],"grid-column-start":n[1],"grid-row-end":"span "+n[2],"grid-column-end":"span "+n[3]}).attr({"layo-row-start":n[0],"layo-col-start":n[1],"layo-row-span":n[2],"layo-col-span":n[3]});else if(n)this.$max.css(n);else if(e.defaultPos)this.$max.css(e.defaultPos);else{var r=this.$max.parent()[0].getBoundingClientRect();this.$max.css({"grid-area":"",height:350,width:500,top:(r.height-350)/2,left:(r.width-500)/2})}}}],r=[{key:"buildCard",value:function(t){var n=e.cards[null==t?void 0:t.id];n?n.buildCard(null==t?void 0:t.cntr,null==t?void 0:t.pos,t):console.error("no cards"+(null==t?void 0:t.id))}},{key:"getCard",value:function(t){return e.cards[t]}},{key:"_refreshIndex",value:function(){var t=$(this);t.css("z-index")<e.index&&t.css("z-index",++e.index)}}],n&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();f(h,"cards",{}),f(h,"berforeBuild",null),f(h,"afterBuild",(function(e){})),f(h,"beforeDraw",null),f(h,"afterDraw",null),f(h,"beforeDestroy",null),f(h,"beforeClose",null),f(h,"__listener__",{}),f(h,"remove",(function(e){})),f(h,"index",100),h.destroy=function(e){var t=h.cards[e];t&&(t.destroy(),delete h.cards[e])},h._defaultCard=function(e){return Object(i.merge)({name:"",icon:'<i class="iconfont icon-test"></i>',id:"",min:{draw:function(e,t,n){e.parent().find(".card-title").css({height:"0.8vh"}).find(".text").text(""),e.text(n.name).css({height:"calc(5vh - 0.8vh)","line-height":"calc(5vh - 0.8vh)","font-size":"1.8vh"})}},max:{draw:function(t){var n=this;new Promise((function(t){t(Object(i.isFunc)(e.src)?e.src.call(n):e.src)})).then((function(e){if("string"==typeof e){var n=t.find("iframe");n.length||(n=$("<iframe>").addClass("external").appendTo(t)),n.attr("src","about:blank"),setTimeout((function(){n.attr("src",e)}),0)}else e instanceof Array&&h.buildFrameTab(t[0],e)}))}}},e)},h.buildFrameTab=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{cap:"百度",url:"www.baidu.com"}],n=document.createElement("div");n.classList.add("frame-tab");var r=document.createElement("div");r.classList.add("tab-btn-container"),n.appendChild(r);var i=document.createElement("div");i.classList.add("frame-container"),n.appendChild(i);var a=document.createElement("div");a.classList.add("frame-url"),i.appendChild(a);var o=null;t.length>5&&(t=t.slice(t.length-5,t.length)),t.forEach((function(e,n){var s=document.createElement("button");s.innerHTML=e.cap;var c=function(){null!==o&&i.removeChild(o),(o=document.createElement("iframe")).setAttribute("src",e.url),a.innerText="正在载入".concat(e.url,"..."),o.onload=function(){a.innerText=""},i.appendChild(o),Array.prototype.forEach.call(r.querySelectorAll("button.selected"),(function(e){e.classList.remove("selected")})),s.classList.add("selected")};s.onclick=c,r.appendChild(s),null===o&&c(),n===t.length-1&&c()})),e.appendChild(n)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5),t),i(n(19),t),i(n(3),t),i(n(6),t),i(n(20),t),i(n(10),t),i(n(21),t),i(n(22),t),i(n(13),t)},function(e,t,n){"use strict";function r(e,t){return void 0===e&&(e=0),void 0===t&&(t=e+100),e+Math.round(Math.random()*(t-e))}function i(...e){return e[r(1,e.length)-1]}function a(e,t=0){return e=o(e),isNaN(e)?NaN:Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function o(e){if("number"==typeof e)return e;let n=String(e).match(t.anyNumberMatcher);return n?parseFloat(n[0]):NaN}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=t.toFixed=t.toFloat=t.toInteger=t.getDecimalPlace=t.toNumber=t.round=t.pureNumberMatcher=t.anyNumberMatcher=t.numberPattern=t.randomValueInRange=t.randomValueIn=t.randomValue=void 0,t.randomValue=r,t.randomValueIn=i,t.randomValueInRange=function(...e){let t=i.apply(null,e);return r(t[0],t[1])},t.numberPattern="[+-]?\\d*\\.?\\d+([Ee][+-]?\\d+)?",t.anyNumberMatcher=RegExp(t.numberPattern,"g"),t.pureNumberMatcher=RegExp("^"+t.numberPattern+"$"),t.round=a,t.toNumber=o,t.getDecimalPlace=function(e){let n=String(e).match(t.anyNumberMatcher);if(n){const e=n[0].split(/[eE]/),t=e[0].indexOf(".");let r=0;return t>-1&&(r=e[0].length-t-1),2===e.length&&(r-=parseInt(e[1])),r}return 0},t.toInteger=function(e){return a(e,0)},t.toFloat=function(e){return o(e)},t.toFixed=function(e,t=0){return a(e,t).toFixed(t)},t.isNumber=function(e){return!!String(e).match(t.pureNumberMatcher)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jamlog=t.JamLog=t.LimeLog=void 0;const r=n(2);class i{constructor(e){this.logger=null;let t=this;t.logger=e,Object.values(i.LEVEL).forEach((e=>{let n=e.value;if(n<=i.LEVEL.DEBUG.value&&!globalThis.debugMode)return;n=Math.max(n,i.globalMinLevel.value);let r=console.log;n===i.LEVEL.WARN.value?r=console.warn:n>=i.LEVEL.ERROR.value&&(r=console.error),e.method.forEach((n=>{Object.defineProperty(this,n,{get:()=>r.bind(null,t.getPrefix(e))})}))}))}info(...e){}log(...e){}trace(...e){}debug(...e){}warn(...e){}error(...e){}getPrefix(e){let t=this.logger;if(!t){t=(new Error).stack.split("\n")[3].split(/[ \t]+/)[2]}return`[${r.formatTime(new Date,"yyyy-MM-dd HH:mm:ss")}][${t}][${e.name}]`}}t.LimeLog=i,t.JamLog=i,i.LEVEL={TRACE:{value:0,name:"TRACE",method:["trace"]},DEBUG:{value:1,name:"DEBUG",method:["debug"]},INFO:{value:2,name:"INFO",method:["info","log"]},WARN:{value:3,name:"WARN",method:["warn"]},ERROR:{value:4,name:"ERROR",method:["error"]}},i.globalMinLevel=i.LEVEL.TRACE,t.jamlog=globalThis.jamlog=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JamInterval=t.toArray=t.toBoolean=t.getLinearGradient=t.genGUID=t.genUUID=t.repeatUUIDChar=t.repeatRandomChar=void 0;const r=n(3),i=n(6);function a(e,...t){let n="";for(let i=0;i<e;i++)r.randomValueInRange,n+=String.fromCharCode(r.randomValueInRange.apply(null,t));return n}function o(e){return a(e,[48,57],[97,102])}function s(){return`${o(8)}-${o(4)}-${(0,r.randomValue)(1,5)}${o(3)}-${(0,r.randomValueIn)(8,9,"a","b")}${o(3)}-${o(12)}`}t.repeatRandomChar=a,t.repeatUUIDChar=o,t.genUUID=s,t.genGUID=function(){return`{${s}}`},t.getLinearGradient=function(e){e.hue=void 0===e.hue?(0,r.randomValue)(0,360):e.hue+(0,r.randomValue)(55,65),e.hue=e.hue>360?e.hue-360:e.hue;let t=e.hue,n=void 0===e.stat?(0,r.randomValue)(70,90):e.stat,i=void 0===e.light?(0,r.randomValue)(60,70):e.light,a=e.alpha?e.alpha:1;t>=225&&t<=265&&(i*=1.05);let o=0,s=55;t>=10&&t<=80&&(o=0,s=(0,r.randomValueIn)(30,-30),i*=.9);let c=void 0===e.dev?t+(0,r.randomValueInRange)([-s,-o],[o,s]):t+e.dev;c=c>360?c-360:c;let l=i;e.grayscale&&(t=200,c=200,n=10,i=90,l=75);let u="hsla("+t+", "+n+"%, "+i+"%, "+a+")";return 0===e.dev?u:"linear-gradient("+(0,r.randomValue)(160,178)+"deg, "+u+", hsl("+c+", "+n+"%, "+l+"%))"},t.toBoolean=function(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase().trim():!!e},t.toArray=function(e,t=",",n="any"){let r=null;return r=Array.isArray(e)?e:"string"==typeof e?e.split(t).map((e=>e.trim())):[e],r=r.map((e=>(0,i.castTo)(e,n))),r};class c{static setInterval(e,t){const n=c.root++,r=()=>{if("function"!=typeof e)throw new Error("Argument callback must be a function");e(),c.handlers[n]=setTimeout((()=>{r()}),t)};return r(),n}static clearInterval(e){clearTimeout(c.handlers[e]),delete c.handlers[e]}}t.JamInterval=c,c.handlers={},c.root=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.merge=t.enumerable=t.EasyGet=t.castTo=t.cloneDeep=t.unFlattenObject=t.flattenObject=t.hashCode=void 0;const r=n(5),i=n(3);function a(e,t=new WeakMap){const n=Object.prototype.toString.call(e);if(!new RegExp(["Array","Object","Map","Set","WeakMap","WeakSet"].join("|")).test(n))return e;if(t.has(e))return t.get(e);const r=new e.constructor;return(e instanceof Map||e instanceof WeakMap)&&Object.entries(e).forEach((e=>{r.set(a(e[0]),a(e[1]))})),(e instanceof Set||e instanceof WeakSet)&&Object.values(e).forEach((e=>r.add(a(e)))),t.set(e,r),Object.assign(r,...Object.keys(e).map((n=>({[n]:a(e[n],t)}))))}function o(e,t="any"){switch(t){case"string":return String(e);case"boolean":return(0,r.toBoolean)(e);case"number":return(0,i.toNumber)(e);case"integer":return(0,i.toInteger)(e);case"any":return(0,i.isNumber)(e)?(0,i.toNumber)(e):e;default:return e}}t.hashCode=function(e){let t=this;if(null==e&&null==e)return 0;var n=1;switch(typeof e){case"object":if(Array.isArray(e)){e.sort().forEach((function(e){n=31*n+t.hashCode(e)}));break}Object.keys(e).sort().forEach((function(r){n=31*n+t.hashCode(e[r])}));break;case"number":n=e;break;default:for(var r=0,i=String(e),a=0;a<i.length;a++){r=(r<<5)-r+i.charCodeAt(a);r&=r}n=r}return n},t.flattenObject=function e(t,n){let r={};if(!t)return r;let i=Object.keys(t);for(let a=0;a<i.length;a++){let o=i[a],s=t[o],c=(n?n+".":"")+o;!s||"object"!=typeof s||s instanceof Array?r[c]=s:r=Object.assign(r,e(s,c))}return r},t.unFlattenObject=function(e){let t={},n=Object.keys(e);for(let r=0;r<n.length;r++){let i=n[r].split("."),a=t;for(let t=0;t<i.length;t++){let o=i[t];o in a||(a[o]={}),t===i.length-1?a[o]=e[n[r]]:a=a[o]}}return t},t.cloneDeep=a,t.castTo=o;t.EasyGet=class{constructor(e){Object.assign(this,e)}get(e,t,n="any"){if(!this.hasOwnProperty(e))return t;let r=o(this[e],n);return null==r||isNaN(r)?t:r}getString(e,t){return this.get(e,t,"string")}getBoolean(e,t=!1){return this.get(e,t,"boolean")}getInteger(e,t=NaN){return this.get(e,t,"integer")}getNumber(e,t=NaN){return this.get(e,t,"number")}add(e,t){this[e]=t}getArray(e,t=",",n="any"){return this.hasOwnProperty(e)?(0,r.toArray)(this[e],t,n):[]}},t.enumerable=function(e){return function(t,n,r){r.enumerable=e}},t.merge=function e(t,n,r=!0,i=!1,o){function s(e,t){return e?a(t):Object.assign({},t)}let c=function(e){return e&&"object"==typeof e&&!(e instanceof Array)};if(null==t||null==t)return s(r,n);var l=s(r,t);return null==n||null==n||Object.keys(n).forEach((function(t){let a=n[t];if(t.startsWith("@opt:")&&!((t=t.substr(5))in l))return;let u=l[t];t in l&&c(u)&&c(a)?l[t]=e(u,a,r,i,o):function(e,t,n){"___remove___"===n?delete e[t]:c(n)?e[t]=s(r,n):i&&e[t]instanceof Array&&n instanceof Array?e[t]=e[t].concat(n):Array.isArray(o)?o.forEach((function(r){"function"==typeof r&&(e[t]=r(t,n,e[t]))})):e[t]=n}(l,t,a)})),l}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JamWebSocket=t.StrawberrySocket=void 0;const r=n(4);class i{constructor(e){this.url="jamwebsocket",this.autoReconnect=!1,this.timeout=-1,this.onopen=null,this.onclose=null,this.onerror=null,this.onconnecting=null,this.onretrying=null,this.onmessage=null,this.binaryType=null,this.__socket__=null,this.__reconnectWait__=5,this.__reconnectLimit__=Number.MAX_SAFE_INTEGER,this.__reconnectCount__=0,this.__reconnectto__=-1,this.__connectto__=-1,this.__logger__=null;let t=this;return globalThis.WebSocket?"url"in e?(Object.assign(t,e),null===t.__logger__&&(t.__logger__=new r.LimeLog(`${t.url}`)),t.timeout=Math.min(t.timeout,30),t):(console.error("Missing argument url."),t):(alert("你的浏览器看起来不支持WebSocket协议。请使用谷歌浏览器。"),t)}connect(){let e=this;return e.__socket__&&e.__socket__.readyState===WebSocket.OPEN?(e.__logger__.info("already connected."),e):(e.__logger__.info("connecting..."),e.__reconnectCount__++,e.timeout>0&&(e.__connectto__=setTimeout((()=>{e.__socket__&&e.__socket__.readyState!==WebSocket.OPEN&&(e.__logger__.warn("connection timeout."),e.__socket__.close())}),1e3*e.timeout)),e.__socket__=new WebSocket(e.url),"function"==typeof e.onconnecting&&Promise.resolve().then((()=>{e.onconnecting.call(e.__socket__,null)})),e.binaryType&&(e.__socket__.binaryType=e.binaryType),e.__socket__.onopen=t=>{e.__logger__.info("connected."),e.__reconnectCount__=0,clearTimeout(e.__connectto__),"function"==typeof e.onopen&&e.onopen.call(e.__socket__,t)},e.__socket__.onerror=t=>{e.__logger__.error("error occured."),"function"==typeof e.onerror&&e.onerror.call(e.__socket__,t)},e.__socket__.onclose=t=>{e.__logger__.info("closed."),"function"==typeof e.onclose&&e.onclose.call(e.__socket__,t),e.autoReconnect&&e._reconnect()},e.__socket__.onmessage=t=>{e.__logger__.info("recieved an message",t.data),"function"==typeof e.onmessage&&e.onmessage.call(e.__socket__,t.data)},e)}close(){let e=this;return e._cancelAutoReconnect(),e.__socket__&&e.__socket__.readyState!==WebSocket.CLOSING&&e.__socket__.readyState!==WebSocket.CLOSED&&(e.__logger__.info("closing..."),e.__socket__.close(),e.__socket__=null),e}send(e){let t=this;if(t.__socket__){if(t.__socket__.readyState!==WebSocket.OPEN)throw`socket ${{[WebSocket.CLOSED]:"closed",[WebSocket.CLOSING]:"closing",[WebSocket.CONNECTING]:"still connecting"}[t.__socket__.readyState]}.`;{let n=e;"string"==typeof e||e instanceof Uint8Array||(n=JSON.stringify(e)),t.__logger__.info("sending message",JSON.stringify(e)),t.__socket__.send(n)}}return t}addEventListener(e,t){let n=this;return n.__socket__&&n.__socket__.addEventListener(e,t),n}removeEventListener(e,t){let n=this;return n.__socket__&&n.__socket__.removeEventListener(e,t),n}_reconnect(){let e=this;e.__reconnectCount__>=e.__reconnectLimit__||("function"==typeof e.onretrying&&Promise.resolve().then((()=>{e.onretrying.call(e.__socket__,null)})),clearTimeout(e.__reconnectto__),isNaN(e.__reconnectWait__)||e.__logger__.info(`reconnect in ${e.__reconnectWait__} secs.`),e.__reconnectto__=setTimeout((()=>{(!e.__socket__||e.__socket__.readyState!==WebSocket.CONNECTING&&e.__socket__.readyState!==WebSocket.OPEN)&&e.connect()}),1e3*e.__reconnectWait__))}_cancelAutoReconnect(){this.autoReconnect=!1,clearTimeout(this.__reconnectto__)}}t.StrawberrySocket=i,t.JamWebSocket=i},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=t.emojiLength=t.emojisOnly=t.emphasisTag=t.finetuneDevName=t.getTitleLength=t.isStringNull=t.strToUTF8Arr=t.UTF8ArrToStr=t.extract=t.b64EncodeUnicode=t.b64DecodeUnicode=void 0,t.b64DecodeUnicode=function(e){return e?decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")):""},t.b64EncodeUnicode=function(e){return e?btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):""},t.extract=function(e,t){const n=e.match(RegExp(t));return n?n[0]:""},t.UTF8ArrToStr=function(e){for(var t,n="",r=e.length,i=0;i<r;i++)t=e[i],n+=String.fromCharCode(t>251&&t<254&&i+5<r?1073741824*(t-252)+(e[++i]-128<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>247&&t<252&&i+4<r?(t-248<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>239&&t<248&&i+3<r?(t-240<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>223&&t<240&&i+2<r?(t-224<<12)+(e[++i]-128<<6)+e[++i]-128:t>191&&t<224&&i+1<r?(t-192<<6)+e[++i]-128:t);return n},t.strToUTF8Arr=function(e){for(var t,n,r=e.length,i=0,a=0;a<r;a++)i+=(n=e.charCodeAt(a))<128?1:n<2048?2:n<65536?3:n<2097152?4:n<67108864?5:6;t=new Uint8Array(i);for(var o=0,s=0;o<i;s++)(n=e.charCodeAt(s))<128?t[o++]=n:n<2048?(t[o++]=192+(n>>>6),t[o++]=128+(63&n)):n<65536?(t[o++]=224+(n>>>12),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n)):n<2097152?(t[o++]=240+(n>>>18),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n)):n<67108864?(t[o++]=248+(n>>>24),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n)):(t[o++]=252+(n>>>30),t[o++]=128+(n>>>24&63),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n));return t},t.isStringNull=function(e){return null==e||"string"==typeof e&&(""===e.trim()||"undefined"===e.trim().toLowerCase()||"null"===e.trim().toLowerCase()||"未定义"===e.trim().toLowerCase()||"未分类"===e.trim().toLowerCase())},t.getTitleLength=function(e){let t="",n=0,r=0;if("string"==typeof e)t=e;else{if(!(e instanceof Array))return 0;t=e.join(",")}for(var i=0;i<t.length;i++)t.charCodeAt(i)>255?n+=2:r++;return n+r},t.finetuneDevName=function(e){return e.replace(/^.*\./,"")},t.emphasisTag=function(e,t){let n=String(e).match(/\[[^\[\]]*\]/g);if(n){let r=String(e);for(let e=0;e<n.length;e++)r=r.replace(n[e],'<span class="emphasis-tag"'+(t?' style="--emphasis-tag-height:'+t+'"':"")+">"+n[e].replace(/(^\[|\]$)/g,"")+"</span>");return r}return e};t.emojisOnly=function(e){return"string"==typeof e&&!!e.match(/^(\p{Extended_Pictographic}|\ufe0f|\u200d|[\u{1F1E6}-\u{1F1FF}]|[\u{1F3FB}-\u{1F3FF}]|[\u{1F9B0}-\u{1F9B3}]|[\u{E0020}-\u{E007F}])+$/gu)},t.emojiLength=function(e){return[...e.replace(/[\u{1F1E6}-\u{1F1FF}]|[\u{1F3FB}-\u{1F3FF}]|[\u{1F9B0}-\u{1F9B3}]|[\u{E0020}-\u{E007F}]/gu,"").replace(/\p{Extended_Pictographic}([\ufe0f]?[\u200d])+/gu,"").replace(/[\ufe0f]/gu,"")].length},t.isEmpty=function(e){return!e||""===String(e).trim()||"null"===e||"undefined"===e||"NaN"===e}},function(e,t,n){"use strict";n.r(t),n.d(t,"Layoutable",(function(){return o}));var r=n(0);n(28);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.layoutMode=!1,this.cntr=t.container||document.getElementsByTagName("body")[0],t.canvas?this.canvas=t.canvas instanceof $?t.canvas[0]:t.canvas:this.canvas=null,this.$shadow,this.rowNum=t.rowNum||12,this.colNum=t.colNum||24,this.gap=void 0!==t.gap?t.gap:1.6,this.cvsRect,this.gridRect,this.processing,this.endGrids,this.layoutName="新自定义场景",this.layoutId,this.gridConfig={row:{max:50,min:1,step:1,name:"行数"},col:{max:100,min:1,step:1,name:"列数"},gap:{max:10,min:0,step:.1,name:"间隔"}},this.btnEvent=t.ctrlBtn||[],this.domKey=t.domKey||"id",this.init()}var t,n,o;return t=e,(n=[{key:"init",value:function(){var e=this;!function(e){return e&&"object"===i(e)&&1===e.nodeType}(e.canvas)?(e.canvas=document.createElement("div"),e.cntr.appendChild(e.canvas)):e.canvas.getAttribute("layo-row-num")&&e.canvas.getAttribute("layo-col-num")&&(e.rowNum=e.canvas.attr("layo-row-num"),e.colNum=e.canvas.attr("layo-col-num"));var t=e.canvas;Object(r.addClass)(t,"jam-layoutable-canvas");var n=t.style;n.setProperty("--grid-row-num",String(e.rowNum)),n.setProperty("--grid-col-num",String(e.colNum)),n.setProperty("--grid-gap",parseFloat(e.gap)+"vh"),n.setProperty("display","grid"),n.setProperty("grid-auto-columns","0px"),n.setProperty("grid-auto-rows","0px"),n.setProperty("grid-gap","var(--grid-gap)"),n.setProperty("padding","var(--grid-gap)"),n.setProperty("grid-template-rows","repeat(var(--grid-row-num), 1fr)"),n.setProperty("grid-template-columns","repeat(var(--grid-col-num), 1fr)"),e.resize(),$(e.canvas).on("mouseenter",".bg-grid",(function(e){$(this).css({background:"hsla(0, 0%, 50%, 0.05)"})})),$(e.canvas).on("mouseout",".bg-grid",(function(e){$(this).css({background:""})}))}},{key:"resize",value:function(e,t,n){this.rowNum=e||this.rowNum,this.colNum=t||this.colNum,this.gap=void 0!==n?n:this.gap;var r=this.canvas.style;r.setProperty("--grid-row-num",String(this.rowNum)),r.setProperty("--grid-col-num",String(this.colNum)),r.setProperty("--grid-gap",parseFloat(this.gap)+"vh")}},{key:"makeLayoutable",value:function(e,t){var n,i=this,a=t&&t.drag?t.drag:{},o=t&&t.resize?t.resize:{},c=s(e);c.length&&(c.addClass("layoutable-object movable resizable"),c.draggable({containment:i.canvas,enable:!0,scroll:!1,iframeFix:!0,delay:50,opacity:.8,helper:function(){return(n=$(this).clone()).addClass("jamui-clone").removeClass("no-title"),n.find(".card-body").html(""),n},start:function(e,t){i.__start(e,n,1),Object(r.isFunc)(a.start)&&a.start(e,t),this.style.display="none"},drag:function(e,t){i.__during(e,n,1),Object(r.isFunc)(a.doing)&&a.doing(e,t)},stop:function(e,t){var n,o;$(this).css({top:(null==t||null===(n=t.position)||void 0===n?void 0:n.top)+"px",left:(null==t||null===(o=t.position)||void 0===o?void 0:o.left)+"px",display:"flex"}),i.__stop(e,c,1),Object(r.isFunc)(a.stop)&&a.stop(e,t)}}),c.resizable({handles:"n, e, s, w, ne, se, sw, nw",start:function(e,t){i.__start(e,c,2),Object(r.isFunc)(o.start)&&o.start(e,t)},resize:function(e,t){i.__during(e,c,2),Object(r.isFunc)(o.doing)&&o.doing(e,t)},stop:function(e,t){i.__stop(e,c,2),Object(r.isFunc)(o.stop)&&o.stop(e,t)}}),c.find(".ui-resizable-handle").on({mouseover:function(e){$("iframe").css({"pointer-events":"none"})},mouseleave:function(e){$("iframe").css({"pointer-events":""})}}),i.putInPos(c))}},{key:"putInPos",value:function(e,t,n,r,i){var a=this,o=s(e);if(o.length){var c=t||o.attr("layo-row-start"),l=n||o.attr("layo-col-start"),u=r||o.attr("layo-row-span"),d=i||o.attr("layo-col-span");if(u&&d){c=c||"auto",l=l||"auto";var f={top:"",left:"",height:"",width:"",right:"",bottom:"","grid-row-start":String(c),"grid-column-start":String(l),"grid-row-end":"span "+("max"===u?a.rowNum:u),"grid-column-end":"span "+("max"===d?a.colNum:d)},h={"layo-row-start":c,"layo-col-start":l,"layo-row-span":u,"layo-col-span":d},_=$("<div>").css(f).attr(h).appendTo($(a.canvas));o.css({"grid-area":"",top:_.position().top,left:_.position().left,height:_.height(),width:_.width()}).trigger("resize"),_.remove(),setTimeout((function(){o.css(f).attr(h),o.resize()}),350)}}}},{key:"__start",value:function(e,t,n){e.stopPropagation();var r=this;r.cvsRect=r.canvas.getBoundingClientRect(),r.processing=!0,$("body").css({"pointer-events":"none"});var i=t[0].getBoundingClientRect();t.css({transition:"none","pointer-events":"none","grid-area":"unset",top:i.top-r.cvsRect.top,left:i.left-r.cvsRect.left,height:i.height,width:i.width}),!1!==r.layoutMode&&r.$shadow&&r.$shadow.css({display:"block"})}},{key:"__stop",value:function(e,t,n){e.stopPropagation();var r=this;if(r.processing=!1,$("body").css({"pointer-events":""}),$("iframe").css({"pointer-events":""}),t.css({transition:"","pointer-events":""}),!1!==r.layoutMode){r.$shadow&&r.$shadow.css({display:"none"}),$(".bg-grid").css({background:""});var i=r.endGrids.start.row,a=r.endGrids.start.col;t.attr("layo-row-start",i),t.attr("layo-col-start",a),t.css({top:"",left:"",height:"100%",width:"100%","grid-row-start":String(i),"grid-column-start":String(a)});var o=t.attr("layo-row-span"),s=t.attr("layo-col-span");o&&s&&1===n||(o=(o=r.endGrids.end.row-r.endGrids.start.row+1)>1?o:1,s=(s=r.endGrids.end.col-r.endGrids.start.col+1)>1?s:1,t.attr("layo-row-span",o),t.attr("layo-col-span",s)),t.css({"grid-row-end":"span "+o,"grid-column-end":"span "+s}),1===n&&t.trigger("resize")}}},{key:"__during",value:function(e,t,n){if(!1!==this.layoutMode){e.stopPropagation();var r,i,a=this,o=t[0].getBoundingClientRect(),s=document.documentElement.clientHeight*a.gap/100,c=(a.cvsRect.height-s)/a.rowNum,l=(a.cvsRect.width-s)/a.colNum;r={row:Math.ceil((o.top-a.cvsRect.top-s/2+c/2)/c),col:Math.ceil((o.left-a.cvsRect.left-s/2+l/2)/l)},i={row:Math.ceil((o.bottom-a.cvsRect.top-s/2-c/2)/c),col:Math.ceil((o.right-a.cvsRect.left-s/2-l/2)/l)},a.endGrids={start:r,end:i},a.$shadow||(a.$shadow=$("<div>").css({background:"hsla(186, 100%, 50%, 0.1)",margin:"calc(0px - var(--grid-gap) / 2)"}).attr("id","layo-shadow").appendTo($(a.canvas))),a.$shadow.css({"grid-row-start":String(a.endGrids.start.row),"grid-column-start":String(a.endGrids.start.col),"grid-row-end":String(a.endGrids.end.row+1),"grid-column-end":String(a.endGrids.end.col+1)})}}},{key:"layoutModeBuildIn",value:function(e,t){!0!==this.layoutMode&&(this.canvas.classList.add("edit"),this.canvas.querySelectorAll(".jamui-card").forEach((function(e){$(e).JamCard().unsetCard()})),this.layoutName=t||this.layoutName,this.layoutId=e,this.__enterLayoutMode(),$("#layoutModeBtn").css("pointer-events","none"),this.layoutMode=!0)}},{key:"layoutModeBuildOut",value:function(){this.__exitLayoutMode(),this.canvas.classList.remove("edit"),this.canvas.querySelectorAll(".layoutable-object").forEach((function(e){$(e).JamCard().setCard()})),this.layoutMode=!1}},{key:"__enterLayoutMode",value:function(){Object(r.addClass)(document.getElementsByTagName("body")[0],"layoutmode");var e=this,t=$(e.canvas);0===t.children(".jam-ctrl-pannel").length?e.__buildCtrlPannel():e.__updateCtrlPannel(),0===t.children(".grid-bg").length&&$("<div>").addClass("grid-bg").css({display:"block","--grid-line-color":"hsla(0, 0%, 0%, 0.1)","grid-row-start":"1","grid-column-start":"1","grid-row-end":"span var(--grid-row-num)","grid-column-end":"span var(--grid-col-num)",index:"-1","pointer-events":"none","background-image":"linear-gradient(var(--grid-line-color) 0px, var(--grid-line-color) 1px, transparent 1px, transparent 100%), linear-gradient(90deg, var(--grid-line-color) 0px, var(--grid-line-color) 1px, transparent 1px, transparent 100%)","background-size":"calc(100% / var(--grid-col-num)) calc(100% / var(--grid-row-num))",margin:"calc(0px - var(--grid-gap) / 2)",border:"1px solid var(--grid-line-color)"}).appendTo(t)}},{key:"__exitLayoutMode",value:function(){Object(r.removeClass)(document.getElementsByTagName("body")[0],"layoutmode"),this.canvas.querySelector(".bg-grid")&&this.canvas.querySelector(".bg-grid").remove(),this.canvas.querySelector(".grid-bg")&&this.canvas.querySelector(".grid-bg").remove(),this.canvas.querySelector(".jam-ctrl-pannel").style.display="none"}},{key:"__buildCtrlPannel",value:function(){var e=this,t=e.gridConfig,n=document.createElement("div");n.className="jam-ctrl-pannel";var r=document.createElement("div");r.className="jam-ctrl-text",r.innerHTML='<span class="name">场景名称:</span><input class="ctrl-text" type="text" placeholder="请输入" maxlength="10" value="'+e.layoutName+'"/>',n.appendChild(r),Object.keys(t).forEach((function(r){var i=t[r],a=document.createElement("div"),o=-1,s=-1,c=-1;a.className="jam-ctrl-item alt-"+r;var l=document.createElement("span");l.className="name",l.innerText=i.name+":";var u=document.createElement("div");u.className="jam-tab-handler handler-left",u.innerHTML='<i class="iconfont icon-jian"></i>',u.onmousedown=function(){var t=parseFloat(d.value)?parseFloat(d.value):0;function n(){t!==i.min&&(t=(t-=i.step)<i.min?i.min:t,d.value=t,e.__rearrange(r,t))}n(),o=setTimeout((function(){c=setInterval((function(){n()}),60)}),400)},u.onmouseup=function(){clearTimeout(o),clearInterval(c),clearInterval(s)},u.onmouseleave=function(){clearTimeout(o),clearInterval(c),clearInterval(s)};var d=document.createElement("input");switch(d.type="number",d.className="value",d.min=i.min,d.max=i.max,d.step=i.step,r){case"gap":d.value=e.gap;break;case"row":d.value=e.rowNum;break;case"col":d.value=e.colNum}function f(){var t=parseFloat(d.value)?parseFloat(d.value):0;t=(t=t<i.min?i.min:t)>i.max?i.max:t,d.value=t,e.__rearrange(r,t)}d.onblur=function(){f()},d.onkeydown=function(){f()};var h=document.createElement("div");h.className="jam-tab-handler handler-right",h.innerHTML='<i class="iconfont icon-jia"></i>',h.onmousedown=function(){var t=parseFloat(d.value)?parseFloat(d.value):0;function n(){t!==i.max&&(t=(t+=i.step)>i.max?i.max:t,t="gap"===r?parseFloat(parseFloat(t).toFixed(1)):t,d.value=t,e.__rearrange(r,t))}n(),o=setTimeout((function(){s=setInterval((function(){n()}),60)}),400)},h.onmouseup=function(){clearTimeout(o),clearInterval(c),clearInterval(s)},h.onmouseleave=function(){clearTimeout(o),clearInterval(c),clearInterval(s)},a.appendChild(l),a.appendChild(u),a.appendChild(d),a.appendChild(h),n.appendChild(a)})),e.btnEvent.forEach((function(t){var r=document.createElement("div");r.className="jam-ctrl-btn "+t.id,r.innerHTML='<span class="icon">'.concat(t.icon?t.icon:"",'</span>\n            <span class="name">').concat(t.name?t.name:"","</span>"),r.addEventListener("click",(function(n){t.click(e,n)})),n.appendChild(r)})),this.canvas.appendChild(n)}},{key:"__updateCtrlPannel",value:function(){var e=this.canvas.querySelector(".jam-ctrl-pannel"),t=this.gridConfig;e.style.display="flex";var n=e.querySelectorAll(".jam-ctrl-item input");n[0].value=this.rowNum,n[0].min=t.row.min,n[0].max=t.row.max,n[1].value=this.colNum,n[1].min=t.col.min,n[1].max=t.col.max,n[2].value=this.gap,n[2].min=t.gap.min,n[2].max=t.gap.max,e.querySelector(".jam-ctrl-text input").value=this.layoutName}},{key:"__rearrange",value:function(e,t){var n=this;switch(e){case"gap":if(t===n.gap)return;n.gap=t,n.canvas.style.setProperty("--grid-gap",parseFloat(n.gap)+"vh"),$(".layoutable-object").trigger("resize");break;case"row":if(t===n.rowNum)return;if($(".bg-grid").length)if(t>n.rowNum)for(var r=n.rowNum+1;r<=t;r++)for(var i=1;i<=n.colNum;i++)n.__buildAGrid(r,i);else for(var a=n.rowNum;a>t;a--)$(".bg-grid[row="+a+"]").remove();n.rowNum=t,n.canvas.style.setProperty("--grid-row-num",String(n.rowNum)),$(".layoutable-object").trigger("resize");break;case"col":if(t===n.colNum)return;if($(".bg-grid").length)if(t>n.colNum)for(var o=n.colNum+1;o<=t;o++)for(var s=1;s<=n.rowNum;s++)n.__buildAGrid(s,o);else for(var c=n.colNum;c>t;c--)$(".bg-grid[col="+c+"]").remove();n.colNum=t,n.canvas.style.setProperty("--grid-col-num",String(n.colNum)),$(".layoutable-object").trigger("resize")}}},{key:"__buildAGrid",value:function(e,t){var n=$("<div>");n.addClass("bg-grid").css({outline:"hsla(0, 0%, 0%, 0.12) 1px dashed","grid-row-start":String(e),"grid-row-end":String(e+1),"grid-column-start":String(t),"grid-column-end":String(t+1),margin:"calc(0px - var(--grid-gap) / 2)","z-index":"1"}).attr({id:"bg-grid-"+e+"-"+t,row:e,col:t}),$(this.canvas).append(n)}},{key:"extractSceneConfig",value:function(){var e=this,t=e.canvas.querySelector(".jam-ctrl-pannel .jam-ctrl-text input").value,n=e.domKey,r={id:e.layoutId,name:t,size:[e.rowNum,e.colNum],gap:e.gap,cards:[]};return e.canvas.querySelectorAll(".layoutable-object"),e.canvas.querySelectorAll(".layoutable-object").forEach((function(e){var t=e.getAttribute("layo-row-span");if(t){var i=e.getAttribute("layo-row-start"),a=e.getAttribute("layo-col-start"),o=e.getAttribute("layo-col-span"),s=e.getAttribute(n).replace(/-card$/,""),c=[parseInt(i),parseInt(a),parseInt(t),parseInt(o)];r.cards.push({id:s,pos:c})}})),r}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){var t;return t="string"!=typeof e||e.startsWith("#")||e.startsWith(".")||e.startsWith("#")?e:"#"+e,$(t)}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlParam=t.mergeParam2Url=t.removeParamFromUrl=t.getUrlParams=t.getUrlParamsFromUrl=t.removeUrlParams=t.map2UrlParam=void 0;const r=n(6),i=n(10);function a(e,t=!1){e=(0,r.flattenObject)(e);let n,a="";for(let r in e){let o=e[r];if("#"===r){n=o;continue}let s=[];o instanceof Array?s=s.concat(o):s.push(o);for(let e=0;e<s.length;e++)t&&(0,i.isEmpty)(String(s[e]))||(""!=a&&(a+="&"),a+=r+"="+s[e])}return void 0!==n&&(a+=`#${n}`),a}t.map2UrlParam=a;function o(e){return e.replace(/\?.*$/,"")}function s(e){let t={},n=e.replace(/^.*\?/,""),i=e.includes("#")?e.replace(/^.*#/,""):"";if(n=n.replace(/\#.*$/,""),""!==n){let e=n.split("&");for(let n=0;n<e.length;n++){if(e[n].indexOf("=")<0)continue;let r=e[n].split("="),i=r[0],a=decodeURI(r[1]);if(i in t){if(!(t[i]instanceof Array)){let e=[];e.push(t[i]),t[i]=e}t[i].push(a)}else t[i]=a}}return""!==i&&(t["#"]=i),t=(0,r.unFlattenObject)(t),t}function c(){return new r.EasyGet(s(globalThis.location.search))}t.removeUrlParams=o,t.getUrlParamsFromUrl=s,t.getUrlParams=c,t.removeParamFromUrl=function(e,t){let n=s(e);if(!n.hasOwnProperty(t))return e;delete n[t];let r=a(n);return o(e)+(""!==r?"?"+r:"")},t.mergeParam2Url=function(e,t){let n=s(e);n=(0,r.merge)(n,t);let i=a(n);return o(e)+(""!==i?"?"+i:"")},t.getUrlParam=function(e,t){var n=t;return e in c()&&(n=c()[e]),n}},,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"MangoMessanger",(function(){return MangoMessanger}));var _jar_strawberrySocket__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_jar_strawberrySocket__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_jar_strawberrySocket__WEBPACK_IMPORTED_MODULE_0__),_jar_limeLog__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_jar_limeLog__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_jar_limeLog__WEBPACK_IMPORTED_MODULE_1__),_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_spoon_numberUtil__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_spoon_numberUtil__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_spoon_numberUtil__WEBPACK_IMPORTED_MODULE_3__);function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var MangoMessanger=function(){function MangoMessanger(e){_classCallCheck(this,MangoMessanger),e=e||{},this.__prefix__=e.prefix||"mAnGoJaM",this.__encryptFlag__=!1!==e.encrypt,this.__data__={},this.__listeners__={},this.__origin__,this.__init(),this.sseUrl=e.sseUrl,this.sseKeyUrl=e.sseKeyUrl,this.__sseMsg={},this.source=null,this.__sseKeys=[],this.__sleepTime=e.sleepTime||60,this.__sleepTimeout=-1,this.__logger__=new _jar_limeLog__WEBPACK_IMPORTED_MODULE_1__.LimeLog("MangoMessanger"),this.__slicedMessages__={}}return _createClass(MangoMessanger,[{key:"__init",value:function(){var e=this;e.__origin__=window.location.origin,window&&(window.addEventListener("message",(function(t){e.__messageHandler(t)})),window.addEventListener("visibilitychange",(function(){if(clearTimeout(e.__sleepTimeout),document.hidden){var t=!0;Object(_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunc)(e.sseclossAsInvisible)&&(t=e.sseclossAsInvisible.call(e,document.hidden)),t&&(e.__sleepTimeout=setTimeout((function(){e.closeSSE()}),100*e.__sleepTime))}else e.openSSE()})),window.addEventListener("beforeunload",(function(){e.closeSSE()})))}},{key:"setPrefix",value:function(e){for(var t=e.split(""),n=[],r=0;r<t.length;r++)n.push(r%2==0?t[r].toLowerCase():t[r].toUpperCase());this.__prefix__=n.join("")}},{key:"push",value:function(){for(var e,t,n,r=this,i=!1,a=0;a<arguments.length;a++){var o=arguments[a];null!=o&&("boolean"==typeof o?i=o:"object"===_typeof(o)&&"origin"in o?t=o:o instanceof Array&&(n=o))}e={},n=n&&n.length>0?n:Object.keys(r.__data__);for(var s=0;s<n.length;s++){var c=n[s];if(c in r.__data__){var l=r.__data__[c];(i||l.state!==MangoMessanger.const.pushed)&&(e[c]=l.value,l.state===MangoMessanger.const.toDelete?delete r.__data__[c]:i||(l.state=MangoMessanger.const.pushed))}}return Object.keys(e).length>0&&r.__send(e,t),r}},{key:"fetchAll",value:function(){return this.fetch(),this}},{key:"fetch",value:function(e){var t=this;if(window.parent===window)return t;var n=t.__parseVararg(arguments);return window.parent.postMessage(t.__buildCallbackRequest("push",[n,!0],!0),"*"),t}},{key:"setExpired",value:function(e){var t=this;e=0===(e=t.__parseVararg(arguments)).length?Object.keys(t.__data__):e;for(var n=0;n<e.length;n++){var r=e[n];r in t.__data__&&(t.__data__[r].state=MangoMessanger.const.expired)}return t}},{key:"setExpiredAndFetch",value:function(e){var t=this;return e=t.__parseVararg(arguments),t.setExpired(e),t.fetch(e),t}},{key:"has",value:function(e){return e in this.__data__}},{key:"get",value:function(e,t){return e in this.__data__?this.__data__[e].value:t}},{key:"commit",value:function(e,t,n){var r=this;"object"!==_typeof(r.__data__)&&(r.__data__={});var i=JSON.stringify(new Date);return e in r.__data__&&r.__isSame(r.__data__[e].value,t)||(r.__exeListeners(e,t),r.__data__[e]={value:t,source:n||r.__origin__,updateTime:i,state:t===MangoMessanger.const.toDelete?t:MangoMessanger.const.toUpdate}),r}},{key:"update",value:function(e,t,n){var r=this;return r.commit(e,t,n),r.push(e),r.__sendViaSocket({method:"update",key:e,value:t,source:n||r.__origin__}),r}},{key:"sync",value:function(e,t,n){var r=this;return r.commit(e,t,n),r.push(e),window.parent!==window&&window.parent.postMessage(r.__buildCallbackRequest("push",[[e]],!1),"*"),r.__sendViaSocket({method:"sync",key:e,value:t,source:n||r.__origin__}),r}},{key:"delete",value:function(e,t){var n=this;return n.commit(e,MangoMessanger.const.toDelete,t),n.push(e),n.__sendViaSocket({method:"delete",key:e,value:MangoMessanger.const.toDelete,source:t||n.__origin__}),n}},{key:"addVariableListener",value:function(e,t,n,r){var i=this;if("function"==typeof n)return t in i.__listeners__||(i.__listeners__[t]={}),e in i.__listeners__[t]||(i.__listeners__[t][e]=this.__getDefaultListener(t,e)),i.__listeners__[t][e].push(n),r&&i.__sendViaSocket({method:"addVariableListener",key:t,event:e},r),i;i.__logger__.error("Third argument not a function.")}},{key:"addOnetimeVariableListener",value:function(e,t,n,r){var i=this;return this.addVariableListener(e,t,(function(a){"function"==typeof n&&n.call(null,a),i.removeVariableListener(e,t,n,r)}),r)}},{key:"removeVariableListener",value:function(e,t,n,r){var i=this;return void 0===e||void 0===t?(i.__logger__.warn("Event or key is undefined."),i):"function"!=typeof n?(i.__logger__.warn("Third argument not a function."),i):(this.__removeListener(e,t,n),r&&i.__sendViaSocket({method:"removeVariableListener",key:t,event:e},r),i)}},{key:"removeVariableListeners",value:function(e,t){return this.__removeListener(e,t)}},{key:"__removeListener",value:function(e,t,n){var r,i=this,a=null===(r=i.__listeners__[t])||void 0===r?void 0:r[e];if(void 0===a)return i.__logger__.error("No <"+e+"> listener for <"+t+"> is found."),i;try{if(a.includes(n)){var o=a.indexOf(n);a.splice(o,1)}else a.length=0;Object.keys(i.__listeners__[t]).forEach((function(e){i.__listeners__[t][e].length<=1&&delete i.__listeners__[t][e]})),0===Object.keys(i.__listeners__[t]).length&&delete i.__listeners__[t]}catch(n){i.__logger__.error("Failed to remove <"+e+"> listener for <"+t+">",n)}return i}},{key:"__getDefaultListener",value:function(e,t){var n=this;return{update:[function(t){globalThis.jarLidOpen&&n.__logger__.log('"'.concat(e,'" has been updated to ').concat(JSON.stringify(t)))}],delete:[function(t){globalThis.jarLidOpen&&n.__logger__.log('"'.concat(e,'" has been removed.'))}]}[t]}},{key:"clearAllVariableListeners",value:function(){return this.__listeners__={},this}},{key:"setEncrypt",value:function(e){return this.__encryptFlag__=!!e,this}},{key:"__parseVararg",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r instanceof Array?t=t.concat(r):t.push(r)}return t}},{key:"__messageHandler",value:function(e){var t=this;if("string"==typeof e.data&&e.data.startsWith(t.__prefix__)){var n=t.__decode(e.data);if(""!==n){var r=n;try{r=JSON.parse(n,(function(e,t){return"string"==typeof t&&t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/)?new Date(t):t}))}catch(e){return void t.__logger__.error("Failed to parse <"+n+"> to object.")}if(MangoMessanger.const.callback in r)t.__processCallback(r[MangoMessanger.const.callback],e);else for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],s=r[o];t.__exeListeners(o,s,e.origin)}}}}},{key:"__exeListeners",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"me",i=this,a=t===MangoMessanger.const.toDelete?void 0:t,o=JSON.stringify(a);if(e in i.__data__&&(n=i.__data__[e].state===MangoMessanger.const.expired?MangoMessanger.const.expired:JSON.stringify(i.__data__[e].value)),n!==o){var s,c="update";t===MangoMessanger.const.toDelete?(c="delete",delete i.__data__[e]):i.__data__[e]={value:a,updateTime:JSON.stringify(new Date),source:r,state:MangoMessanger.const.updated};var l=null===(s=i.__listeners__[e])||void 0===s?void 0:s[c];l&&l.forEach((function(e){Promise.resolve().then((function(){e.call(null,a)}))}))}}},{key:"__buildCallbackRequest",value:function(e,t,n){var r={};return r[MangoMessanger.const.callback]={method:e,args:[].slice.call(t),needEvent:n},this.__encode(JSON.stringify(r))}},{key:"__processCallback",value:function __processCallback(request,event){var me=this;if("method"in request&&"args"in request)try{var _func;if(eval("_func = me."+request.method),"function"!=typeof _func)return void me.__logger__.error("No such method <"+request.method+">.");var _args=request.args;request.needEvent&&(_args=[event].concat(_args)),_func.apply(me,_args)}catch(e){me.__logger__.error("Failed to call function<"+request.method+"> args<"+request.args+">",e)}}},{key:"__isSame",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"__send",value:function(e,t){var n;if("object"===_typeof(e)&&0!==Object.keys(e).length){n=JSON.stringify(e),n=this.__encode(n);var r=[];t?t.source&&"null"!==t.origin&&r.push({dom:t.source,src:t.origin}):(window.parent!==window&&r.push({dom:window.parent,src:"*"}),Array.prototype.forEach.call(document.getElementsByTagName("iframe"),(function(e){var t=e.src;(t=t.trim())&&""!==t&&"about:blank"!==t&&r.push({dom:e.contentWindow,src:t})}))),r.forEach((function(e){e.dom.postMessage(n,e.src)}))}}},{key:"__encode",value:function(e,t){var n=this;if(t)return(n.__prefix__||"")+e;if(e&&n.__encryptFlag__)try{for(var r=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))),i=n.__randomValue(3,10),a=n.__randomValue(1,i),o=[65+a],s=0;s<i;s++)s+1===a&&o.push(65+i),o.push(n.__randomValue(0,10)>=5?n.__randomValue(97,122):n.__randomValue(65,90));return r=(n.__prefix__||"")+String.fromCharCode.apply(null,o)+r}catch(e){}return(n.__prefix__||"")+e}},{key:"__decode",value:function(e){if(null==e)return e;var t=this;if(t.__encryptFlag__)try{var n=t.__prefix__?t.__prefix__.length:0,r=e.substr(n+e.charCodeAt(n+e.charCodeAt(n)-65)-63);return r=decodeURIComponent(atob(r).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(e){}return e.substr(t.__prefix__?t.__prefix__.length:0)}},{key:"__randomValue",value:function(e,t){return e+Math.round(Math.random()*(t-e))}},{key:"addSocketChannel",value:function(e){var t=this;t.sockets||(t.sockets={});var n=e.url,r=!!e.echo,i=String(e.id),a=!1!==e.autoReconnect,o=isNaN(e.retryInterval)?5:e.retryInterval,s=e.retryLimit||0,c=n;if(!(c in t.sockets)){var l=new _jar_strawberrySocket__WEBPACK_IMPORTED_MODULE_0__.StrawberrySocket({url:n,autoReconnect:a,ready:Promise.resolve(),__reconnectWait__:o,__reconnectLimit__:s,onmessage:function(e){var a;try{a=JSON.parse(e)}catch(e){return}if(r||a.source!==i){var o=a.value;try{if(o.includes(MangoMessanger.const.sliced)){var s=_slicedToArray(o.split(MangoMessanger.const.sliced),2),c=s[0],u=s[1],d=_toArray(c.split("/")),f=d[0],h=d.slice(1),_=parseInt(h[0]),p=parseInt(h[1]);f in t.__slicedMessages__||(t.__slicedMessages__[f]={size:p,count:0,cache:[],time:(new Date).getTime()});var m=t.__slicedMessages__[f];if(m.count++,m.cache[_-1]=u,m.count!==m.size)return;o=m.cache.join(""),delete t.__slicedMessages__[f]}o=t.__decode(o),o=JSON.parse(o)}catch(e){}switch(a.method){case"fetch":l.send({method:"update",key:a.key,value:JSON.stringify(t.__data__[a.key])});break;case"update":t.update(a.key,o,n);break;case"delete":t.delete(a.key,n);break;case"sync":t.sync(a.key,o,n);break;case"addVariableListener":"__mm_callbacks__"in l||(l.__mm_callbacks__={});var g=function(){l.send({method:a.event,key:a.key,value:JSON.stringify(t.__data__[a.key])})};l.__mm_callbacks__["".concat(a.event,"@_@").concat(a.key)]=g,t.addVariableListener(a.event,a.key,g);break;case"removeVariableListener":t.removeVariableListener(a.event,a.key,l.__mm_callbacks__["".concat(a.event,"@_@").concat(a.key)])}}},onclose:function(){t.sockets&&c in t.sockets&&(t.__logger__.log('"'.concat(c,'" accidently closed.')),t.commit("".concat(c,"_state"),MangoMessanger.const.socketClosed),t.sockets[c].heartbeat&&clearTimeout(t.sockets[c].heartbeat))},onerror:function(){t.sockets&&c in t.sockets&&t.commit("".concat(c,"_state"),MangoMessanger.const.socketError)},onconnecting:function(){t.sockets&&c in t.sockets&&t.commit("".concat(c,"_state"),MangoMessanger.const.socketConnecting)},onretrying:function(){t.sockets&&c in t.sockets&&t.commit("".concat(c,"_state"),MangoMessanger.const.socketConnecting)}});t.sockets[c]={ws:l,id:i,echo:r,ready:new Promise((function(e,n){l.onopen=function(){c in t.sockets&&t.sockets[c].listeners&&Object.keys(t.sockets[c].listeners).forEach((function(e){t.__sendViaSocket({method:"addVariableListener",key:e.split("@_@")[1],event:e.split("@_@")[0]},c)})),t.sockets[c].heartbeat&&clearTimeout(t.sockets[c].heartbeat);t.sockets[c].heartbeat=setTimeout((function e(){t.__sendViaSocket({method:"ping"}),t.sockets[c].heartbeat=setTimeout(e,2e4)}),2e4),t.commit("".concat(c,"_state"),MangoMessanger.const.socketOpened),e()}}))}}var u=t.sockets[c];return u.ws.connect(),u}},{key:"removeSocketChannel",value:function(e){var t=this;if(t.sockets&&e in t.sockets){var n=t.sockets[e];n.ws.close(),"__mm_callbacks__"in n&&Object.keys(n.__mm_callbacks__).forEach((function(e){t.removeVariableListener(e.split("@_@")[0],e.split("@_@")[1],n.__mm_callbacks__[e])})),clearTimeout(t.sockets[e].heartbeat),delete t.sockets[e]}}},{key:"__sendViaSocket",value:function(e,t){var n=this;if(n.sockets){var r={};t?r[t]=n.sockets[t]:r=n.sockets,Object.entries(r).forEach((function(t){var r=_slicedToArray(t,2),i=r[0],a=r[1];if(a&&e.source!==i){var o=["addVariableListener","removeVariableListener"].indexOf(e.method);if(-1!==o){var s="".concat(e.event,"@_@").concat(e.key);"listeners"in a||(a.listeners={}),0===o?a.listeners[s]=null:delete a.listeners[s]}a.ready.then((function(){if(e.source=a.id,a.echo||(e.excludes=[a.id]),void 0!==e.value){var t=1e6,r=e.value;if("string"!=typeof r&&(r=JSON.stringify(r)),(r=n.__encode(r,r.length>t)).length>t)for(var i=Math.ceil(r.length/t),o=Object(_spoon_numberUtil__WEBPACK_IMPORTED_MODULE_3__.randomValue)(0,999999),s=0;s<i;s++){var c=r.substr(s*t,t);e.value="".concat(o,"/").concat(s+1,"/").concat(i)+MangoMessanger.const.sliced+c,a.ws.send(e)}else e.value=r,a.ws.send(e)}else a.ws.send(e)}))}}))}}},{key:"setSSOpt",value:function(e){return this.sseUrl=e.sseUrl,this.sseKeyUrl=e.sseKeyUrl,this.__sseKeys=e.listeners||[],this.__sleepTime=e.sleepTime||60,this.sseclossAsInvisible=e.invisibleFunc,this.seeCloseFunc=e.close,this}},{key:"openSSE",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{url:null,openFunc:null,key:null,msg:{}};if(!this.source&&(e.url&&(this.sseUrl=e.url),e.key&&(this.__sseKeys=e.key),0!==this.__sseKeys.length)){this.source=new EventSource("".concat(this.sseUrl,"?key=").concat(this.__sseKeys.join(","))),this.__sseMsg=e.msg,this.source.onopen=function(t){Object(_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunc)(e.openFunc)&&e.openFunc(t)};var t=this;return this.source.onmessage=function(e){var n;try{n=JSON.parse(e.data)}catch(n){t.__logger__.error("$csse analysis error:"+e.data,"color:  #c5711a;")}t.__sseEventId=e.lastEventId,n&&"object"===_typeof(n)&&Object.keys(n).forEach((function(e){t.update(e+"-sse",n[e]),Object(_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunc)(t.__sseMsg[e])&&t.__sseMsg[e].call(t,n[e])}))},this.source.onerror=function(e){t.__logger__.error("%csse link fail","color:  #c5711a;")},this.source}}},{key:"getSource",value:function(){return this.source}},{key:"setSSEMsg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.__sseMsg,e)}},{key:"delSSEMsg",value:function(e){e&&this.__sseMsg&&delete this.__sseMsg[e]}},{key:"closeSSE",value:function(){this.source&&(Object(_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunc)(this.seeCloseFunc)&&this.seeCloseFunc.call(this),this.source.close(),this.source=null)}},{key:"addSSEListeners",value:function(e){var t=this;if(e){var n=this.__sseKeys,r=!1;"string"!=typeof e||n.includes(e)?e instanceof Array?e.forEach((function(i){n.includes(e)||(r=!0,t.__sseKeys.push(i))})):Object.keys(e).forEach((function(i){!n.includes(e)&&Object(_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunc)(e[i])&&(n.includes(e)||(r=!0,t.__sseKeys.push(i)),t.__sseMsg[i]=e[i])})):(r=!0,this.__sseKeys.push(e)),r&&this.setSSEListeners()}}},{key:"delSSEListeners",value:function(e){var t=this;"string"==typeof e?this.__sseKeys.remove(e):e instanceof Array&&e.forEach((function(e){t.__sseKeys.remove(e)})),this.setSSEListeners()}},{key:"setSSEListeners",value:function(){var e=this;clearTimeout(this.__sseUrlTime__),this.__sseUrlTime__=setTimeout((function(){e.__setSSEListeners()}),500)}},{key:"__setSSEListeners",value:function(){if(this.source)if(0===this.__sseKeys.length)this.closeSSE();else{var e=new XMLHttpRequest;e.open("GET",this.sseKeyUrl,!1),e.send("key=".concat(this.__sseKeys.join(","),"&eventId=").concat(this.__sseEventId))}else this.openSSE()}}]),MangoMessanger}();_defineProperty(MangoMessanger,"const",{toDelete:"=@tOdElEtE@=",toUpdate:"=@tOuPdAtE@=",pushed:"=@pUsHeD@=",updated:"=@uPdAtEd@=",expired:"=@eXpIrEd@=",callback:"=@cAlLbAcK@=",sliced:"=@sLiCeD@=",socketClosed:"closed",socketOpened:"opened",socketError:"error",socketConnecting:"connecting"}),String.prototype.addVariableListener=function(e,t){window.mangoJam.addVariableListener(e,this.toString(),t)},String.prototype.removeVariableListener=function(e,t){window.mangoJam.removeVariableListener(e,this.toString(),t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"Jam",(function(){return u}));var r=n(1),i=n(11),a=n(0);n(29);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s,c=document.getElementsByTagName("body")[0],l="jamLayout",u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tabInfo=t.tab,this.tab=null,this.layoutableInfo=t.layoutable||{ctrlBtn:[]},this.layouable=null,this._screenConfig={id:"newScene",name:"场景",size:[1,1],gap:0,hasTab:!0,showTab:!0,showDock:!0,closable:!1,group:"default",cards:[],src:null,openAllCards:!0},this.cards=t.cards,this.dock=null,this.dockInfo=t.dock,this.messenger=null,this.messengerInfo=t.messenger||{},this.screen=t.screen,this.current=t.initial,this.currentCardIds=[],this.currentPos=null,Object(a.addClass)(c,"jam-layout-body"),this._initTab(),this._initLayoutable(t.screenCntr),this._initDock(),this._initScreen(),this._initMessenger(),$.data(this.layoutable.canvas,l,this)}var t,n,s;return t=e,(n=[{key:"init",value:function(){return this.current&&this._openView(this.screen[this.current]),this}},{key:"_initTab",value:function(){var e=this.tabInfo;if(!e)return c.style.setProperty("--head-heigth","0px"),this._screenConfig.hasTab=!1,void(this._screenConfig.showTab=!1);var t=this,n=e.container?e.container:c,r=document.createElement("header");r.className="jam-layout-top",n.appendChild(r);var i={container:r,data:[],clickSelf:!1,click:function(n){t.buildScreen(n),Object(a.isFunc)(e.click)&&e.click(),Object(a.isFunc)(t.screen[n].tabClick)&&t.screen[n].tabClick()}};this.tab=jamTab.nav(i);var o=[].concat(e.tabBtn),s=document.createElement("div");s.className="jam-tab-btn-container",r.appendChild(s),o.forEach((function(e){var n=Object(a.isFunc)(e)?e():e,r=document.createElement("div");r.className="jam-tab-btn",r.innerHTML=n.icon?Object(a.parseIcon)(n.icon):n.html,n.name&&(r.title=n.name),n.class&&Object(a.addClass)(r,n.class),n.id&&r.setAttribute("data-id",n.id),!0===n.frameless&&Object(a.addClass)(r,"frameless"),Object(a.isFunc)(n.click)&&r.addEventListener("click",(function(){n.click(t)})),s.appendChild(r)}))}},{key:"_initLayoutable",value:function(){var e=this.layoutableInfo||{},t={rowNum:1,colNum:1,gap:0,domKey:"id",ctrlBtn:e.ctrlBtn};if(e.canvas)t.canvas=e.canvas;else if(e.container)t.container=e.container;else{var n=document.createElement("div");c.appendChild(n),t.canvas=n}this.layoutable=new i.Layoutable(t)}},{key:"_initDock",value:function(){var e=this,t=e.dockInfo,n=e.layoutable;if(e.addCard(e.cards),!t)return c.style.setProperty("--bottom-height","0px"),void(this._screenConfig.showDock=!1);var r=t.container;r||((r=document.createElement("footer")).className="jam-layout-bottom",c.appendChild(r)),e.dock=new Dock({container:r,max:{movable:!1,resizable:!1,container:n.canvas,openFunc:function(e){t.max&&Object(a.isFunc)(t.max.open)&&t.max.open()},closeFunc:function(){t.max&&Object(a.isFunc)(t.max.close)&&t.max.close()}},min:{openFunc:function(){t.min&&Object(a.isFunc)(t.min.open)&&t.min.open()},closeFunc:function(){t.min&&Object(a.isFunc)(t.min.close)&&t.min.close()}}})}},{key:"_initScreen",value:function(){var e=this,t=this.screen,n=e.current,r=!!n;Object.keys(t).forEach((function(i){var a=e.buildLayoutProfile(t[i]);t[i]=a,a.id=i,!0===a.hasTab&&(e.tab||console.error("no tab profile"),!1===r&&(r=!0,n=i),e.tab.addTab(a))})),n&&(e.current=n)}},{key:"_initMessenger",value:function(){this.messenger=window.mangoJam}},{key:"buildLayoutProfile",value:function(e){return $.extend(!0,{},this._screenConfig,e)}},{key:"buildScreen",value:function(e){var t=this.screen,n=null;if("string"==typeof e)this.current=e,n=t[e];else{var r=e.id?e.id:e.name;n=t.hasOwnProperty(r)?$.extend(!0,t[e.id],e):this.buildLayoutProfile(e),t[r]=n,this.current=r}this._openView(n)}},{key:"_openView",value:function(e){var t=this,n=this.dock,i=this.layoutable,o=this.tab,s=e.id;!0===e.hasTab&&(o||console.error("no tab profile"),o.cntr.querySelector(".jam-tab-butt[data-id="+e.id+"]")?o.selectTab(s):o.addTab(e,!0)),e.showTab?this.showTab():this.hideTab(),e.showDock?this.showDock():this.hideDock(),i.canvas.setAttribute("layoutable-id",s),i.canvas.setAttribute("layoutable-name",e.name),i.resize(e.size[0],e.size[1],e.gap);var c=[].concat(this.currentCardIds);this.currentCardIds=[],e.cards.forEach((function(o){var s;"string"==typeof o?(t.currentCardIds.push(o),s=r.a.getCard(o)):(t.currentCardIds.push(o.id),s=r.a.getCard(o.id)),!s instanceof r.a&&(s=new r.a(o)),s?(Promise.resolve().then((function(){if(n&&n.buildMini(s),e.openAllCards)if(s.$max){var r="string"==typeof o?null:o.pos;t.setCardPos(s,r)}else s.buildCard(i.canvas);s.setCard()})),Object(a.arrRemove)(c,s.id)):console.error("no card profile")})),n?c.forEach((function(e){n.closeMiniCard(e)})):c.forEach((function(e){r.a.getCard(e).destroy()}));var l=i.canvas.querySelector("iframe.layoutable-iframe");l||((l=document.createElement("iframe")).classList="layoutable-iframe",$(l).css({"layo-row-start":1,"layo-col-start":1,"layo-row-span":"max","layo-col-span":"max","grid-area":"1 / 1 / span 1 / span 1"}),i.canvas.appendChild(l));var u=e.src;u&&""!==u.trim()?(l.src="about:blank",setTimeout((function(){l.src=u,l.setAttribute("iframeid",s)}),100),l.style.display=""):(l.src="about:blank",l.style.display="none")}},{key:"hideTab",value:function(){this.tab&&(Object(a.addClass)(document.querySelector("header.jam-layout-top"),"hide"),this.tab.cntr.style.height="0px",Object(a.isFunc)(this.tabInfo.hideFunc)&&this.tabInfo.hide())}},{key:"showTab",value:function(){this.tab&&(Object(a.removeClass)(document.querySelector("header.jam-layout-top"),"hide"),Object(a.isFunc)(this.tabInfo.showFunc)&&this.tabInfo.show())}},{key:"hideDock",value:function(){this.dock&&this.dock.$wrap.addClass("hide")}},{key:"showDock",value:function(){this.dock&&this.dock.$wrap.removeClass("hide")}},{key:"buildEmptyScreen",value:function(){this._openView(this.buildLayoutProfile({id:"empty",name:"空",hasTab:"false"}))}},{key:"removeAScreen",value:function(e){if(this.screen[e]){var t=this.tab;if(delete this.screen[e],t){t.removeTab(e);var n=t.cntr.querySelector(".jam-tab-butt");if(n){var r=n.getAttribute("data-id");this.current=r,this.buildScreen(r),t.selectTab(r)}else this.current="",this.buildEmptyScreen()}else this.buildEmptyScreen()}}},{key:"setCardPos",value:function(e,t){var n=("string"==typeof e?r.a.getCard(e):e).$max;if(n)if(t&&t instanceof Array)t.every((function(e){return"number"==typeof e}))?this.layoutable.putInPos(n,t[0],t[1],t[2],t[3]):n.css({left:_pos[0],top:_pos[1],width:_pos[2],height:_pos[3]});else if(r.a.defaultPos)n.css(r.a.defaultPos);else{if(!this.currentPos){var i=n.parent()[0].getBoundingClientRect();this.currentPos={"grid-area":"",height:350,width:500,top:(i.height-350)/2,left:(i.width-500)/2}}n.css(this.currentPos)}}},{key:"addCard",value:function(e){e&&("Object"==e.constructor.name?[e]:e).forEach((function(e){e.id,new r.a(e)}))}},{key:"update",value:function(e){if(e){var t=Object.keys(e),n=this.messenger;t.forEach((function(t){return n.update(t,e[t])})),t.forEach((function(t){var n=r.a.__listener__[t];n&&n.forEach((function(n){var i=r.a.getCard(n);if(i&&(i.$max||i.$min)){var o=i.config.listeners[t];Object(a.isFunc)(o)&&setTimeout((function(){o.apply(i,[i,e[t]])}),0)}}))}))}}},{key:"get",value:function(e){return this.messenger.get(e)}},{key:"redrawMaxCard",value:function(e){function t(t){var n="string"==typeof e?r.a.getCard(t):t;n.$max&&n.buildCard()}"Array"===e.constructor.name?e.forEach((function(e){return t(e)})):t(e)}},{key:"openCard",value:function(e,t){var n=this;"Array"===e.constructor.name?e.forEach((function(e){return n.dock.openCard(e,t)})):n.dock.openCard(e,t)}},{key:"layouableModeIn",value:function(e,t){this.layoutable.layoutModeBuildIn(e,t)}},{key:"destory",value:function(){this.buildEmptyScreen(),$.data(this.layoutable.canvas,l,null)}}])&&o(t.prototype,n),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();(s=u).tabBtn={close:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return{icon:'<i class="iconfont icon-close"></i>',id:"close",click:function(t){Object(a.isFunc)(e)&&e(t),-1!=navigator.userAgent.indexOf("Firefox")||-1!=navigator.userAgent.indexOf("Chrome")?(window.onbeforeunload=function(){},location.href="about:blank",close()):(opener=null,open("","_self"),close())}}})),layoutMode:function(e){return{icon:'<i class="iconfont icon-trash"></i>',id:"layoutMode",click:function(e){e.layoutable.layoutModeBuildIn()}}}},s.layoutableBtn={save:function(e){return{icon:'<i class="iconfont icon-save"></i>',id:"save",name:"保存",click:function(t){var n=t.extractSceneConfig();Object(a.isFunc)(e)?e.apply(t,[n]):t.layoutModeBuildOut()}}},cancel:function(e){return{icon:'<i class="iconfont icon-close"></i>',id:"cancel",name:"取消",click:function(t,n){Object(a.isFunc)(e)&&e(t,n),t.layoutModeBuildOut()}}},trash:function(e){return{icon:'<i class="iconfont icon-trash"></i>',id:"trash",name:"删除",click:function(t,n){Object(a.isFunc)(e)&&e(t,n),t.layoutModeBuildOut()}}},copy:function(e){return{icon:'<i class="iconfont icon-copy"></i>',id:"copy",name:"复制",click:function(t){var n=t.extractSceneConfig();Object(a.isFunc)(e)&&e(n),Object(a.copyToClipboard)(JSON.stringify(n)),t.layoutModeBuildOut()}}}},window.$&&($.fn.jamLayout=function(){return this[0]?$.data(this[0],l):null},$.fn.JamCard=function(){return this[0]?$.data(this[0],"jamCard"):null}),r.a.layoutCard=function(e,t){var n=t.layoutable,i={};e.config.max.hasOwnProperty("resize")&&(i.resize=e.config.max.resize),e.config.max.hasOwnProperty("drag")&&(i.drag=e.config.max.drag),n.makeLayoutable(e.$max,i);var a,o=t.screen[t.current];try{a=o.cards.filter((function(t){return"string"!=typeof t&&t.id===e.id}))[0].pos}catch(e){}if(a instanceof Array)n.putInPos(e.$max,a[0],a[1],a[2],a[3]);else if(r.a.defaultPos)e.$max.css(r.a.defaultPos);else{var s=e.$max;if(!t.currentPos){var c=s.parent()[0].getBoundingClientRect();t.currentPos={"grid-area":"",height:350,width:500,top:(c.height-350)/2,left:(c.width-500)/2}}s.css(t.currentPos)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyText=void 0,t.copyText=function(e){"string"!=typeof e&&(e=JSON.stringify(e));const t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("cut")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{t.remove()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=void 0,t.getEnv=function(){return{options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,globalThis.opera],dataos:[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],databrowser:[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],init:function(){var e=this.header.join(" ");return{os:this.matchItem(e,this.dataos),browser:this.matchItem(e,this.databrowser)}},matchItem:function(e,t){var n,r,i,a=0,o=0;for(a=0;a<t.length;a+=1)if(new RegExp(t[a].value,"i").test(e)){if(n=new RegExp(t[a].version+"[- /:;]([\\d._]+)","i"),i="",(r=e.match(n))&&r[1]&&(r=r[1]),r)for(r=r.split(/[._]+/),o=0;o<r.length;o+=1)i+=0===o?r[o]+".":r[o];else i="0";return{name:t[a].name,version:parseFloat(i)}}return{name:"unknown",version:0}}}.init()}},function(e,t,n){"use strict";function r(e){if(e)return"number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=10===e.length?new Date(1e3*parseInt(e)):new Date(parseInt(e))),e}Object.defineProperty(t,"__esModule",{value:!0}),t.getDateObj=t.formatTime=void 0,t.formatTime=function(e,t){if(!e)return;e=r(e);let n=function(e,t){let n;if(e=e<0||e>=7?Math.abs(e)%7:e,0===t)n="星期"+["日","一","二","三","四","五","六"][e];else switch(e){case 0:n=(t?"S":"s")+"unday";case 1:n=(t?"M":"m")+"onday";case 2:n=(t?"T":"t")+"uesday";case 3:n=(t?"W":"w")+"ednesday";case 4:n=(t?"T":"t")+"ursday";case 5:n=(t?"F":"f")+"riday";case 6:n=(t?"S":"s")+"aturday";default:n="N/A"}return n};return t.replace("yyyy",e.getFullYear()).replace("yy",String(e.getFullYear()).substr(2)).replace("MM",(e.getMonth()>=9?"":"0")+(e.getMonth()+1)).replace("M",e.getMonth()+1).replace("dd",(e.getDate()<10?"0":"")+e.getDate()).replace("d",e.getDate()).replace("HH",(e.getHours()<10?"0":"")+e.getHours()).replace("H",e.getHours()).replace("mm",(e.getMinutes()<10?"0":"")+e.getMinutes()).replace("m",e.getMinutes()).replace("ss",(e.getSeconds()<10?"0":"")+e.getSeconds()).replace("s",e.getSeconds()).replace("w",n(e.getDay(),!1)).replace("W",n(e.getDay(),!0)).replace("星期几",n(e.getDay(),0))},t.getDateObj=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=t.debounce=void 0,t.debounce=function(e,t,n){let r,i,a=function(){let a=this,o=arguments;if(r&&clearTimeout(r),n){let n=!r;r=setTimeout((function(){e.apply(a,o)}),t),n&&(i=e.apply(a,o))}else r=setTimeout((function(){e.apply(a,o)}),t);return i};return a.prototype.cancel=function(){clearTimeout(r),r=null},a},t.throttle=function(e,t,n){let r,i,a,o=0;n||(n={});let s=function(){o=!1===n.leading?0:(new Date).getTime(),r=null,e.apply(i,a),r||(i=a=null)};return function(){i=this,a=arguments;let c=(new Date).getTime();o||!1!==n.leading||(o=c);let l=t-(c-o);l<=0||l>t?(r&&(clearTimeout(r),r=null),o=c,e.apply(i,a),r||(r=a=null)):r||!1===n.trailing||(r=setTimeout(s,l))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"JamCard",(function(){return r.a})),n.d(t,"Dock",(function(){return h}));var r=n(1),i=n(0);n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t||console.error("card-contanier is null"),this.config=t,this.$wrap=null,this.max=t.max||{},this.min=t.min||{},this._init()}var t,n,o;return t=e,(n=[{key:"_init",value:function(){this.$wrap||(this._buildWrap(),this._bindEvent(),this.buildCard())}},{key:"redraw",value:function(){this.redrawCard()}},{key:"getWrap",value:function(){return this.$wrap}},{key:"_bindEvent",value:function(){var e=this;this.$wrap&&this.$wrap.on("click","div.mini",(function(){var t=this.getAttribute("data-id"),n=r.a.getCard(t);n&&(n.$max?e.closeMaxCard(n):e.openCard(n))}))}},{key:"buildCard",value:function(e){var t=this;[].concat(e).forEach((function(e){t.buildMini(r.a.cards[e])}))}},{key:"redrawCard",value:function(){for(var e in r.a.cards)this.redrawCard(r.a.cards[e])}},{key:"buildMini",value:function(e){var t="string"==typeof e?r.a.getCard(e):e;t&&(t.buildMini(this.$wrap),t.redrawMini(),Object(i.isFunc)(this.min.openFunc)&&this.min.openFunc(t))}},{key:"addMiniCard",value:function(e){var t="string"==typeof e?r.a.cards[e]:e;t instanceof r.a?this.buildMini(t):console.error("error JamCard")}},{key:"destory",value:function(){this.$wrap.off(),this.$wrap.remove(),this.$wrap=null}},{key:"closeMaxCard",value:function(e){var t="string"==typeof e?r.a.getCard(e):e;t&&t.$max&&(t.removeCard(),Object(i.isFunc)(this.max.closeFunc)&&this.max.closeFunc(t.id))}},{key:"closeMiniCard",value:function(e){var t="string"==typeof e?r.a.getCard(e):e;t&&t.$min&&(t.destroy(),Object(i.isFunc)(this.min.closeFunc)&&this.min.closeFunc(t.id),Object(i.isFunc)(this.max.closeFunc)&&this.max.closeFunc(t.id))}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(30);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(s,e);var t,n,a,o=u(s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e)}return t=s,(n=[{key:"_buildWrap",value:function(){if(!this.$wrap){var e=$("<div>",{id:"jamui-dock",class:"jamcard-wrap bottom"+Object(i.addClassName)(this.config.class)});e.append('<div class="show-trigger"><div class="visiable-item"></div></div>').append('<div class="jamcard-mini-wrap"></div>');var t=this.config.container?this.config.container:$("body");(t=t instanceof $?t:$(t)).append(e),this.$wrap=e}}},{key:"openCard",value:function(e){var t="string"==typeof e?r.a.getCard(e):e;if(t&&t.$max)t.buildCard();else{var n=this.max.container||$("body");t.buildCard(n)}}}])&&c(t.prototype,n),a&&c(t,a),Object.defineProperty(t,"prototype",{writable:!1}),s}(o);r.a.prototype.buildMini=function(e){this.$min&&(this.$min.remove(),this.$min=null);var t=$("<div>",{class:this.id+" minicard-container"}),n=$("<div>",{class:"jamui-card mini dock-mini nice-hover-1 nice-hover-4"+Object(i.addClassName)(this.config.class)+Object(i.addClassName)(this.min.class),id:this.id+"-dock-mini-card","data-id":this.id});!this.config.icon&&n.addClass("no-icon");var r=$("<div>",{class:"card-title"}),a=$("<div>",{class:"card-body"}),o=$("<span>",{class:"text",text:this.config.name||""});r.append('<span class="icon">'+Object(i.parseIcon)(this.config.icon)+"</span>").append(o),n.append(r).append(a).append('<div class="butt-container"></div>'),t.append(n).appendTo(e.children(".jamcard-mini-wrap")),this.$min=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TangeloTips=void 0;const r=n(34);n(35);const i=n(5);t.TangeloTips=class{constructor(e){this.tipsPosition=[0,0],this.config=e,this.$parent=document.getElementsByTagName("body")[0],this.tipInstanceMap=new Map}getPosition(){const e=this.$parent.getElementsByClassName("message-tip");let t={};for(let n=0;n<e.length;n+=1){console.log("locations[i]",e[n]);const{offsetLeft:r,offsetTop:i,offsetHeight:a,offsetWidth:o,id:s}=e[n];t=Object.assign(Object.assign({},t),{[s]:{id:s,offsetLeft:r,offsetTop:i,offsetHeight:a,offsetWidth:o}})}return t}nextTipStartPos(e,t){var n,r;if(null===(n=null==this?void 0:this.config)||void 0===n?void 0:n.showInCenter)return{x:2*this.$parent.offsetWidth/5,y:2*this.$parent.offsetHeight/5};const i=this.getPosition();let a=Object.values(i),o="graph"===t?.79*this.$parent.offsetWidth:this.$parent.offsetWidth-330,s=0;const c=JSON.parse(localStorage.getItem("tip_position"))||{},l=Object.keys(c);if(a=a.filter((e=>!l.includes(e.id))),e&&(null===(r=null==c?void 0:c[e])||void 0===r?void 0:r.length))return[o=o,s=s]=(null==c?void 0:c[e])||[],{x:o,y:s};if(a.length){const e=a.sort(((e,t)=>e.offsetTop+e.offsetHeight-(t.offsetTop+t.offsetHeight))).pop();o=e.offsetLeft,s=e.offsetTop+e.offsetHeight}return{x:o,y:s}}buildTip(e,t){const{id:n,duration:a,content:o,title:s}=t;if(this.tipInstanceMap.has(n)){const e=this.tipInstanceMap.get(n);if(e.tipNode instanceof HTMLElement)return e.makeStriking(),e.stopTimer(),void e.startTimer()}const c=!!n,l=n||(0,i.genUUID)(),{x:u,y:d}=this.nextTipStartPos(n,e),f={id:l,duration:a,content:o,parentNode:this.$parent,isPersistent:c,type:e,title:s,position:[u,d],color:this.config.color,tipInstanceMap:this.tipInstanceMap},h=new r.default(f);this.tipInstanceMap.set(l,h)}show(e){if(this.tipInstanceMap.has(e)){const t=this.tipInstanceMap.get(e);if(t.tipNode instanceof HTMLElement)return t.makeStriking(),t.stopTimer(),void t.startTimer();t.buildTip()}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"JamTab",(function(){return w}));n(31);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.type=t.type,this.init();var r=this.config.initial;[].concat(this.config.data).forEach((function(e,t){r&&r===e.id||0===t?n.addTab(e,!0):n.addTab(e,!1)}))}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.cntr||(this.config.container=this.config.container?this.config.container:document.getElementsByTagName("body")[0],this._buildCntr(this.config.container),this.config.id&&(dom.id=this.config.id))}},{key:"_buildCntr",value:function(e){}},{key:"addTab",value:function(e,t){}},{key:"destory",value:function(){this.cntr.remove(),this.cntr=null}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a=n(0);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(o,e);var t,n,r,i=u(o);function o(){return s(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"_buildCntr",value:function(e){var t=this,n=document.createElement("div");n.className="jam-tab-outer-container";var r=document.createElement("div");r.className="jam-tab-container";var i=document.createElement("div");i.className="jam-tab",t.cntr=i,e.appendChild(n),n.appendChild(r),r.appendChild(i),window.onresize=function(){t.checkOverflow()}}},{key:"addTab",value:function(e,t){var n=document.createElement("span");if(n.className="jam-tab-butt",e.class&&Object(a.addClass)(n,e.class),!0===t){for(var r=this.cntr.querySelectorAll(".jam-tab-butt"),i=0;i<r.length;i++){var o=r[i];if(Object(a.hasClass)(o,"select")){Object(a.removeClass)(o,"select");break}}Object(a.addClass)(n,"select")}n.innerHTML=e.tabHtml?e.tabHtml:e.icon?'<span class="jam-tab-icon">'+e.icon+'</span><span class="jam-tab-cap">'+e.name+"</span>":'<span class="jam-tab-cap">'+e.name+"</span>",n.setAttribute("data-id",e.id),e.no&&(n.style.order=e.no);for(var s=e.group||"default-group",c=this.cntr,l=c.querySelectorAll(".jam-tab-group"),u=null,d=0;d<l.length;d++){var f=l[d];if(Object(a.hasClass)(f,s)){u=f;break}}null===u?((u=document.createElement("div")).className="jam-tab-group "+s,c.appendChild(u)):Object(a.removeClass)(u,"empty"),u.appendChild(n);var h=!1===this.clickSelf?this.config.click:e.click||this.config.click;n.addEventListener("click",(function(t){if(!this.className.includes("select")){for(var n=c.querySelectorAll(".jam-tab-butt"),r=0;r<n.length;r++){var i=n[r];if(Object(a.hasClass)(i,"select")){Object(a.removeClass)(i,"select");break}}Object(a.addClass)(this,"select"),Object(a.isFunc)(h)&&h(e.id,t)}})),n.addEventListener("mouseenter",(function(){var e=c.parentElement;if(e){var t=n.clientWidth,r=e.clientWidth,i=n.getBoundingClientRect().left,a=e.getBoundingClientRect().left,o=i-a,s=i+t-(a+r);o<0&&(e.scrollLeft+=o),s>1&&(e.scrollLeft+=s)}})),this.isOverflowing||this.checkOverflow()}},{key:"removeTab",value:function(e){var t=this.cntr.querySelector(".jam-tab-butt[data-id="+e+"]");if(t){var n=t.parentElement;t.remove(),0===n.childElementCount&&Object(a.addClass)(n,"empty")}}},{key:"selectTab",value:function(e){this.cntr.querySelectorAll(".jam-tab-butt").forEach((function(e){Object(a.removeClass)(e,"select")})),Object(a.addClass)(this.cntr.querySelector(".jam-tab-butt[data-id="+e+"]"),"select")}},{key:"checkOverflow",value:function(){if(this.cntr){var e=this.cntr.parentElement;this.isOverflowing=e.clientWidth+1<e.scrollWidth;var t=Object(a.hasClass)(e,"is-overflowing");if(this.isOverflowing&&!t){var n=function(t){var n="left"===t,r=e.querySelectorAll(".jam-tab-butt"),i=e.getBoundingClientRect()[t],a=[],o=0;r.forEach((function(e,n){a[n]=e.getBoundingClientRect()[t]})),n?a.sort((function(e,t){return t-e})):a.sort((function(e,t){return e-t}));for(var s=0;s<r.length&&(o=a[s]-i,!(n&&o<0))&&(n||!(o>1));s++);return o};Object(a.addClass)(e,"is-overflowing");var r=e.parentElement,i=document.createElement("span");i.className="jam-tab-handler handler-left",i.innerHTML='<i class="iconfont icon-angle-left"></i>';var o=document.createElement("span");o.className="jam-tab-handler handler-right",o.innerHTML='<i class="iconfont icon-angle-right"></i>',r.insertBefore(i,e),r.lastChild===e?r.appendChild(o):r.insertBefore(o,e.nextSibling),i.addEventListener("click",(function(){var t=n("left");e.scrollLeft+=t})),o.addEventListener("click",(function(){var t=n("right");e.scrollLeft+=t}))}else!this.isOverflowing&&t&&(Object(a.removeClass)(e,"is-overflowing"),e.parentElement.querySelectorAll(".jam-tab-handler").forEach((function(e){e.remove()})))}}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(i);n(32);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(o,e);var t,n,r,i=y(o);function o(){return p(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"_buildCntr",value:function(e){var t=document.createElement("div");t.className="jamui-panel-tabs",this.cntr=t,e.appendChild(t)}},{key:"addTab",value:function(e,t){var n=document.createElement("div");n.className="jamui-panel-tab",e.class&&Object(a.addClass)(n,e.class),!0===t&&Object(a.addClass)(n,"select"),n.setAttribute("data-id",e.id),e.no&&(n.style.order=e.no),n.innerHTML='\n        <span class="jamui-panel-tab-icon">'.concat(Object(a.parseIcon)(e.icon),'</span>\n        <span class="jamui-panel-tab-name">').concat(e.name,"</span>\n        "),this.cntr.appendChild(n);var r=e.click||this.config.click;n.addEventListener("click",(function(t){if(!Object(a.hasClass)(this,"select")){for(var n=this.parentElement.children,i=0;i<n.length;i++)Object(a.removeClass)(n[i],"select");Object(a.addClass)(this,"select"),r&&"function"==typeof r&&r(e.id,t)}}))}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(i);function w(){}w.prototype={nav:function(e){return new h(e)},panel:function(e){return new k(e)}}},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={info:{icon:'<i class="iconfont icon-warn"></i>',tip:"信息",color:"hsl(200, 100%, 50%)"},success:{icon:'<i class="iconfont icon-success"></i>',tip:"成功",color:"hsl(112, 63%, 52%)"},error:{icon:'<i class="iconfont icon-close"></i>',tip:"错误",color:"\thsl(12, 82%, 50%)"},warning:{icon:'<i class="iconfont icon-warn1"></i>',tip:"告警",color:"hsl(44, 96%, 59%)"},graph:{icon:'<i class="icon-palette iconfont"></i>',tip:"故障图",color:"hsl(237, 95%, 60%)"}};t.default=class{constructor(e){this.config=e,this.type=e.type,this.id=e.id,this.duration=e.duration,this.title=e.title,this.content=e.content,this.parentNode=e.parentNode,this.position=e.position,this.isPersistent=e.isPersistent,this.loaction=this.getLocation(this.position),this.buildTip(),this.addMouseEvent()}getLocation(e){const[t,n]=e;return t>this.parentNode.clientWidth/2?"right":"left"}addMouseEvent(){const e=this.tipNode;let t=!1;e.addEventListener("mousedown",(n=>{const r=n.pageX-e.offsetLeft,i=n.pageY-e.offsetTop;function a(n){e.style.left=n.pageX-r+"px",e.style.top=n.pageY-i+"px",t=!0}e.style.cursor="grabbing",document.addEventListener("mousemove",a,!1),e.addEventListener("mouseup",(n=>{let o=n.pageX-r,s=n.pageY-i;const c=this.parentNode.offsetLeft,l=this.parentNode.clientWidth-e.clientWidth,u=this.parentNode.offsetTop,d=this.parentNode.clientHeight-e.clientHeight;o<c?o=c:o>l?o=l:s>d?s=d:s<u&&(s=u),s-=4,e.style.left=o+"px",e.style.top=s+"px",document.removeEventListener("mousemove",a),t&&this.savePosition(o,s),t=!1,e.style.cursor="grab"}),!1)})),e.addEventListener("mouseenter",(()=>{this.stopTimer()})),e.addEventListener("mouseleave",(()=>{this.startTimer()}))}savePosition(e,t){const{isPersistent:n,id:r}=this;this.position=[e,t];const i=JSON.parse(localStorage.getItem("tip_position"));this.loaction=this.getLocation([e,t]),n&&localStorage.setItem("tip_position",JSON.stringify(Object.assign(Object.assign({},i),{[r]:[e,t]})))}drawTipContent(){const{content:e}=this,t=document.getElementById(this.id+"-content");if("graph"===this.type){this.tipNode.style.padding="0";const n=document.createElement("iframe"),r=document.createElement("div");r.className="iframe-mask",n.id=this.id+"iframe",n.src=e,r.style.width=n.style.width="20vw",r.style.height=n.style.height="20vh",r.onclick=()=>{window.open(e),this.remove()},t.appendChild(n),t.appendChild(r)}else t.innerHTML=e}drawCloseButton(){if(!this.duration){const e=document.createElement("div");e.className="close-btn",e.innerHTML='<i class="iconfont icon-x1"></i>',e.onclick=e=>{this.remove(e)},this.tipNode.appendChild(e)}}buildTip(){this.stopTimer();const e=document.createElement("div");this.tipNode=e;const[t,n]=this.position;e.id=this.id,e.className="message-tip",e.innerHTML=`\n        <div class="tip-title">\n            <span class="tip-icon" style="color: ${r[this.type].color}">\n                ${r[this.type].icon}\n            </span>\n            <span class="tip-info">\n                ${this.config.title||r[this.type].tip}\n            </span>\n        </div> \n        <div  id=${this.id+"-content"} class="tip-content">\n        </div>`,e.classList.add("fly-in");const i=e.style,{color:a=[]}=this.config;if(a&&a.length){const[e,t]=a;i.setProperty("--background-color",e),i.setProperty("--background-color2",t)}i.setProperty("left",`${t}px`),i.setProperty("top",`${n}px`),this.parentNode.appendChild(e),this.drawTipContent(),this.drawCloseButton(),this.startTimer()}startTimer(){this.duration&&(this.timer=setTimeout((()=>{this.remove()}),1e3*this.duration+900))}stopTimer(){this.duration&&clearTimeout(this.timer)}makeStriking(){this.tipNode&&(this.tipNode.className="message-tip",setTimeout((()=>{this.tipNode.classList.add("striking")}),100))}remove(e){e&&e.stopPropagation()&&e.preventDefault(),this.tipNode&&(this.tipNode.className="message-tip","left"===this.loaction?this.tipNode.classList.add("fly-out-left"):this.tipNode.classList.add("fly-out-right"),setTimeout((()=>{this.tipNode.remove(),this.tipNode=null}),900))}}},function(e,t,n){},,,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4),t),i(n(46),t),i(n(8),t)},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JamRequest=t.ajaxCall=void 0;const r=n(2),i=n(4);class a{constructor(e){this.timeout=0,this.process=null,this.__beforesend__=null,this.__onwaiting__=null,this.__ontimeout__=null,this.__onfinished__=null,this.__onsuccess__=null,this.__onerror__=null,this.__mockUrl__=null,this.__canceled__=!1,this.__reqTo__=-1;Object.assign(this,e)}send(e){let t=this,n=r.hashCode(t)+"-"+r.hashCode(e);return n in a.requests?(i.jamlog.log(`An identical request[${n}] is currently been processing.`),t):(a.requests[n]=1,t.timeout>0&&(t.__reqTo__=setTimeout((()=>{t.__call__(t.__ontimeout__),t.__canceled__=!0}),1e3*t.timeout)),new Promise((e=>{e()})).then((()=>new Promise(((n,r)=>{t.__call__(t.__beforesend__),t.__asynccall__(t.__onwaiting__),"function"==typeof t.process?t.process.call(t,e,n,r):r("Missing process function.")})))).then((e=>(clearTimeout(t.__reqTo__),t.__call__(t.__onsuccess__,e),e)),(e=>(clearTimeout(t.__reqTo__),t.__call__(t.__onerror__,e),e))).then((e=>{t.__call__(t.__onfinished__,e),delete a.requests[n]})),t)}__call__(e,...t){this.__canceled__||"function"==typeof e&&e.apply(this,t)}__asynccall__(e,...t){"function"==typeof e&&new Promise((e=>{e()})).then((()=>{e.apply(this,t)}))}beforeSend(e){return this.__beforesend__=e,this}onWaiting(e){return this.__onwaiting__=e,this}onTimeout(e){return this.__ontimeout__=e,this}onFinished(e){return this.__onfinished__=e,this}onSuccess(e){return this.__onsuccess__=e,this}onError(e){return this.__onerror__=e,this}mock(e){return i.jamlog.log(`Using mock data: ${e}`),this}ajax(e){return new a({process:(t,n,r)=>{let i=new XMLHttpRequest,a=Object.assign(Object.assign({name:e.name||"",method:e.type||"GET",url:e.url||"",async:!1!==e.async,data:e.data||{}},e),t);i.onreadystatechange=function(){if(this.readyState!==XMLHttpRequest.DONE)return;let e,t=!1;if(200===this.status)try{e=JSON.parse(i.responseText),t=!0}catch(e){}t?n.call(null,e):r.call(null,i.responseText)},i.open(a.method,a.url,a.async),i.responseType="text",i.send(JSON.stringify(a.data))}})}}t.default=a,t.JamRequest=a,a.requests={},t.ajaxCall=function(){}},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(73);class r{constructor(e){e.cntr?(this.config=e,this.title=e.title,this.pos=e.pos||"top-center",this.theme=e.theme||"dark",this.distance=e.distance||10,e.cntr instanceof $?this.cntr=e.cntr[0]:this.cntr=e.cntr,this.sharking=e.sharking,this.sharkTime=e.sharkTime||1,this.build()):console.error("no cntr!")}build(){let e=this;if(!e.cntr)return;let t=$(e.cntr);t.find(".tool-tip").length&&t.find(".tool-tip").remove();let n=$(`<div class="tool-tip ${e.pos} ${e.theme} ${e.pos.split("-")[1]} ${this.sharking?"sharking":""}">${e.title}<div class="shine"><span></span><span></span><span></span><span></span></div></div>`).css("visibility","hidden").appendTo(t);this.sharkTime&&n.css("--shark-time",this.sharkTime+"s"),e.toolTip=n[0],t.hover((function(){e.setPos(),n.css("visibility","visible")}),(function(){n.css("visibility","hidden")})),e.setPos()}setPos(){let e=this;if(e.toolTip){let t=e.getPosition();$(e.toolTip).css({"--pos-left":t.left+"px","--pos-top":t.top+"px"})}}getPosition(){let e,t,n=this,r=n.cntr.getBoundingClientRect(),i=n.toolTip.getBoundingClientRect().width,a=n.toolTip.getBoundingClientRect().height;return $(n.toolTip).css({"--top-bottom":i/2+"px","--left-right":a/2+"px","--shine-height":a,"--shine-width":i}),(n.pos.startsWith("top")||n.pos.startsWith("bottom"))&&(n.pos.startsWith("top")&&(e=r.top-a-n.distance),n.pos.startsWith("bottom")&&(e=r.top+r.height+n.distance),n.pos.endsWith("center")&&(t=r.left-i/2+r.width/2),n.pos.endsWith("left")&&(t=r.left-i+r.width/2),n.pos.endsWith("right")&&(t=r.left+r.width/2)),(n.pos.startsWith("left")||n.pos.startsWith("right"))&&(n.pos.startsWith("left")&&(t=r.left-i-n.distance),n.pos.startsWith("right")&&(t=r.left+r.width+n.distance),n.pos.endsWith("center")&&(e=r.top-a/2+r.height/2),n.pos.endsWith("top")&&(e=r.top-a+r.height/2),n.pos.endsWith("bottom")&&(e=r.top+r.height/2)),{top:e,left:t}}destory(){let e=this;e.toolTip&&$(e.toolTip).remove()}}t.default=r,r.toolTips={}},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(23),i=n(11),a=n(25),o=(n(17),n(4)),s=n(18),c=n(24),l=n(2),u=n(52),d=n.n(u),f=n(38);for(var h in f)["default"].indexOf(h)<0&&function(e){n.d(t,e,(function(){return f[e]}))}(h);for(var h in l)["default"].indexOf(h)<0&&function(e){n.d(t,e,(function(){return l[e]}))}(h);window.JamCard||(globalThis.spoon=l,globalThis.jamlog=globalThis.limelog=new o.LimeLog,globalThis.jamTab=new a.JamTab,globalThis.Layoutable=i.Layoutable,globalThis.Jam=s.Jam,globalThis.JamCard=r.JamCard,globalThis.Dock=r.Dock,globalThis.TangeloTips=c.TangeloTips,globalThis.ToolTip=d.a)},function(e,t,n){}]);